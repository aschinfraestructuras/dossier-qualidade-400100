<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Dossier Final da Qualidade do Projeto Alba - ASCH INFRAESTRUCTURAS Y SERVICIOS S.A. para REPSOL POLÍMEROS" />
  <meta name="author" content="ASCH INFRAESTRUCTURAS Y SERVICIOS S.A." />
  <meta name="keywords" content="dossier qualidade, projeto alba, repsol, asch, gestão da qualidade, construção, infraestruturas" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="theme-color" content="#0056B3" />
  <!-- Ícone Favicon -->
  <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
  <title>Dossier Final da Qualidade – Projeto Alba</title>
  <!-- Fontes do Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome para ícones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- PDF.js para visualização de PDFs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <!-- Chart.js para gráficos -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <!-- Configuração do PDF.js -->
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>
  <!-- Estilos CSS -->
  <style>
    :root {
      /* Cores principais - Esquema melhorado para contraste e modernidade */
      --primary: #0056B3;
      --primary-dark: #004494;
      --primary-light: #2D7DD2;
      --secondary: #FF5A5F;
      --secondary-dark: #D64045;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --light: #f8f9fa;
      --dark: #212529;
      --gray: #6c757d;
      --gray-dark: #343a40;
      --gray-light: #dee2e6;
      --white: #ffffff;
      --text: #333333;
      --section-bg: #f9fafb;
      
      /* Novas cores complementares */
      --info: #17a2b8;
      --purple: #6f42c1;
      --teal: #20c997;
      --orange: #fd7e14;
      --blue-light: #e8f4ff;

      /* Sombras e efeitos - Aprimoradas para efeito mais moderno */
      --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
      --card-shadow-hover: 0 15px 30px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --transition-fast: all 0.2s ease;
      --box-shadow-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      --box-shadow-md: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
      --box-shadow-lg: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
      
      /* Tipografia */
      --font-sans-serif: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      --border-radius: 12px;
      --border-radius-sm: 6px;
      --border-radius-lg: 18px;
    }

    /* Reset e estilos base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-sans-serif);
      color: var(--text);
      background-color: var(--light);
      line-height: 1.6;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a {
      color: var(--primary);
      text-decoration: none;
      transition: var(--transition);
    }

    a:hover {
      color: var(--primary-light);
      text-decoration: none;
    }

    /* Tipografia melhorada */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.3;
      margin-bottom: 1rem;
    }

    p {
      margin-bottom: 1rem;
    }

    /* Efeitos de foco melhorados para acessibilidade */
    :focus {
      outline: 3px solid rgba(0, 86, 179, 0.3);
    }

    /* ===== Scrollbar Styling - Melhorada ===== */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary-light);
      border-radius: 10px;
      transition: var(--transition);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary);
    }

    /* ===== Splash Screen - Melhorada com animação ===== */
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(0, 86, 179, 0.95) 0%, rgba(45, 125, 210, 0.85) 100%), 
                  url('assets/images/bg-construction.jpg') center/cover no-repeat;
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.8s ease, transform 0.8s ease;
      padding-top: 0;
    }

    .splash-content {
      text-align: center;
      color: var(--white);
      max-width: 800px;
      padding: 2rem;
      transform: translateY(0);
      transition: transform 0.8s ease;
      animation: fadeInUp 1.2s ease-out;
      background-color: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(5px);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-lg);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .splash-screen.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .splash-screen.fade-out .splash-content {
      transform: translateY(-50px);
    }

    .splash-logo {
      max-height: 100px;
      margin-bottom: 1.5rem;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
      animation: pulse 2s infinite ease-in-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .splash-title {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .splash-subtitle {
      font-size: 1.4rem;
      opacity: 0.9;
      margin-bottom: 2.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    /* ===== Botões - Melhorados com efeitos modernos ===== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      border-radius: var(--border-radius);
      border: none;
      cursor: pointer;
      transition: var(--transition);
      font-size: 1rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      box-shadow: var(--box-shadow-sm);
    }

    .btn::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
      background-repeat: no-repeat;
      background-position: 50%;
      transform: scale(10, 10);
      opacity: 0;
      transition: transform 0.5s, opacity 1s;
    }

    .btn:active::after {
      transform: scale(0, 0);
      opacity: 0.3;
      transition: 0s;
    }

    .btn-lg {
      padding: 1rem 2.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: var(--border-radius-lg);
    }

    .btn-primary {
      background: var(--white);
      color: var(--primary);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .btn-primary:hover {
      background: rgba(255, 255, 255, 0.95);
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 0, 0, 0.15);
    }

    .btn-primary:active {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .btn-outlined {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
      box-shadow: none;
    }

    .btn-outlined:hover {
      background: var(--primary);
      color: var(--white);
      transform: translateY(-3px);
      box-shadow: var(--box-shadow-sm);
    }

    .btn-success {
      background: var(--success);
      color: var(--white);
    }

    .btn-success:hover {
      background: #218838;
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 0, 0, 0.15);
    }

    .btn-info {
      background: var(--info);
      color: var(--white);
    }

    .btn-info:hover {
      background: #138496;
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 0, 0, 0.15);
    }

    .btn-warning {
      background: var(--warning);
      color: var(--dark);
    }

    .btn-warning:hover {
      background: #e0a800;
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 0, 0, 0.15);
    }

    .btn-danger {
      background: var(--danger);
      color: var(--white);
    }

    .btn-danger:hover {
      background: #c82333;
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 0, 0, 0.15);
    }

    /* Botão com ícone flutuante */
    .btn-icon-float {
      position: relative;
      padding-right: 3rem;
    }

    .btn-icon-float i {
      position: absolute;
      right: 1rem;
      transition: var(--transition);
    }

    .btn-icon-float:hover i {
      transform: translateX(5px);
    }

    /* ===== Layout Principal - Melhorado ===== */
    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0s 0.3s, opacity 0.3s linear;
    }

    .app-container.visible {
      visibility: visible;
      opacity: 1;
      transition: opacity 0.8s ease;
    }

    /* ===== Barra de Navegação Superior - Melhorada ===== */
    .top-navbar {
      background: var(--white);
      height: 80px;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      align-items: center;
      padding: 0 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
    }

    .navbar-brand {
      margin-right: auto;
      display: flex;
      align-items: center;
    }

    .brand-logo {
      max-height: 60px;
      transition: var(--transition);
    }

    .brand-logo:hover {
      transform: scale(1.05);
    }

    .navbar-title {
      margin-left: 1rem;
      font-weight: 600;
      font-size: 1.3rem;
      color: var(--primary);
      white-space: nowrap;
      transition: var(--transition);
    }

    .navbar-tools {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* ===== Campo de Pesquisa - Melhorado ===== */
    .search-form {
      position: relative;
      width: 300px;
    }

    .search-input {
      width: 100%;
      padding: 0.7rem 1rem 0.7rem 2.8rem;
      border-radius: 30px;
      border: 1px solid var(--gray-light);
      font-size: 0.9rem;
      transition: var(--transition);
      background-color: var(--light);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(45, 125, 210, 0.15);
      background-color: var(--white);
      width: 110%;
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
      transition: var(--transition);
    }

    .search-form:focus-within .search-icon {
      color: var(--primary);
    }

    /* ===== Botão do Menu Móvel - Melhorado ===== */
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      color: var(--primary);
      font-size: 1.5rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu-toggle:hover {
      background-color: var(--blue-light);
    }

    .menu-toggle:active {
      transform: scale(0.95);
    }

    /* ===== Conteúdo Principal - Layout flexível ===== */
    .main-container {
      display: flex;
      flex: 1;
    }

    /* ===== Barra Lateral de Navegação - Melhorada ===== */
    .sidebar {
      width: 320px;
      background: var(--white);
      border-right: 1px solid var(--gray-light);
      height: calc(100vh - 80px);
      overflow-y: auto;
      transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: sticky;
      top: 80px;
      z-index: 50;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.02);
    }

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--gray-light);
      background-color: var(--blue-light);
    }

    .sidebar-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    /* ===== Campo de Pesquisa na Barra Lateral - Melhorado ===== */
    .search-chapters {
      margin-top: 1rem;
      position: relative;
    }

    .chapter-search {
      width: 100%;
      padding: 0.7rem 1rem 0.7rem 2.8rem;
      border-radius: var(--border-radius);
      border: 1px solid var(--gray-light);
      font-size: 0.9rem;
      transition: var(--transition);
      background-color: var(--light);
    }

    .chapter-search:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(45, 125, 210, 0.15);
      background-color: var(--white);
    }

    .chapter-search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
      transition: var(--transition);
    }

    .search-chapters:focus-within .chapter-search-icon {
      color: var(--primary);
    }

    /* ===== Navegação - Melhorada ===== */
    .navigation {
      padding: 1rem 0;
    }

    /* ===== Categorias da Navegação - Melhoradas ===== */
    .nav-category {
      margin-bottom: 0.5rem;
      border-radius: var(--border-radius-sm);
      overflow: hidden;
      transition: var(--transition);
    }

    .category-header {
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: var(--transition);
      border-left: 3px solid transparent;
      background-color: var(--white);
    }

    .category-header:hover {
      background: var(--section-bg);
    }

    .nav-category.active .category-header {
      border-left-color: var(--primary);
      background: var(--section-bg);
    }

    .header-title {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-weight: 500;
    }

    .header-title i {
      font-size: 1.1rem;
      color: var(--primary);
      width: 22px;
      text-align: center;
      transition: var(--transition);
    }

    .nav-category:hover .header-title i {
      transform: scale(1.1);
    }

    .chevron-icon {
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      color: var(--gray);
    }

    .nav-category.active .chevron-icon {
      transform: rotate(180deg);
      color: var(--primary);
    }

    /* ===== Menu das Categorias - Melhorado ===== */
    .category-menu {
      display: none;
      margin-left: 1.2rem;
      animation: fadeIn 0.4s ease-out;
      background-color: var(--white);
      border-radius: 0 0 var(--border-radius-sm) var(--border-radius-sm);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .nav-category.active .category-menu {
      display: block;
    }

    /* ===== Itens da Navegação - Melhorados ===== */
    .nav-item {
      padding: 0.75rem 1.5rem 0.75rem 3rem;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      border-left: 3px solid transparent;
      flex-wrap: wrap;
    }

    .nav-item:hover {
      background: var(--section-bg);
    }

    .nav-item.active {
      background: var(--blue-light);
      border-left-color: var(--primary);
      font-weight: 500;
    }

    .nav-item i {
      color: var(--primary);
      width: 18px;
      text-align: center;
      transition: var(--transition);
    }

    .nav-item:hover i {
      transform: scale(1.1);
    }

    /* ===== Badge de Status - Melhorado ===== */
    .doc-status {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
      border-radius: 20px;
      background: var(--success);
      color: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
    }

    .doc-status.pending {
      background: var(--warning);
    }

    .doc-status.review {
      background: var(--secondary);
    }

    .nav-item:hover .doc-status {
      transform: translateY(-50%) scale(1.05);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
    }

    /* Assinatura digital - Melhorada */
    .digital-signature {
      border: 1px solid var(--gray-light);
      border-radius: var(--border-radius);
      padding: 1.8rem;
      margin-top: 1.5rem;
      background-color: rgba(0, 86, 179, 0.03);
      position: relative;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
    }

    .digital-signature:hover {
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transform: translateY(-3px);
    }

    .signature-info {
      margin-bottom: 1.8rem;
      font-size: 0.95rem;
    }

    .signature-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      border-top: 1px solid var(--gray-light);
      padding-top: 1.8rem;
    }

    .signature-image {
      max-height: 100px; /* Aumentado de 80px para 100px */
      margin-bottom: 1.2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
      transition: var(--transition);
    }

    .signature-block:hover .signature-image {
      transform: scale(1.05);
    }

    .signature-details {
      text-align: center;
    }

    .signature-name {
      font-weight: 600;
      font-size: 1.2rem; /* Aumentado de 1.1rem para 1.2rem */
      margin-bottom: 0.3rem;
      color: var(--primary);
    }

    .signature-role, .signature-company {
      font-size: 0.9rem;
      color: var(--gray);
      margin-bottom: 0.3rem;
    }

    .signature-seal {
      margin-top: 1.2rem;
      background-color: var(--primary);
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 20px;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
    }

    .signature-seal:hover {
      background-color: var(--primary-dark);
      box-shadow: 0 5px 12px rgba(0, 0, 0, 0.2);
    }

    /* Sombras e efeitos */
    .card-shadow {
      box-shadow: var(--card-shadow);
      transition: var(--transition);
    }

    .card-shadow:hover {
      box-shadow: var(--card-shadow-hover);
      transform: translateY(-3px);
    }
    
    /* Tipografia */
    .font-sans-serif {
      font-family: var(--font-sans-serif);
    }
    
    .border-radius {
      border-radius: var(--border-radius);
    }
    
    .border-radius-sm {
      border-radius: var(--border-radius-sm);
    }
  </style>
  
  <!-- Estilos para o Layout do Conteúdo Principal -->
  <style>
    /* ===== Conteúdo Principal - Melhorado ===== */
    .main-content {
      flex: 1;
      padding: 2rem;
      background: var(--light);
      min-height: calc(100vh - 80px);
    }

    /* ===== Breadcrumbs - Melhorados ===== */
    .breadcrumb {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 2rem;
      font-size: 0.95rem;
      background: var(--white);
      padding: 0.85rem 1.25rem;
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      border-left: 4px solid var(--primary);
    }

    .breadcrumb:hover {
      box-shadow: var(--card-shadow-hover);
    }

    .breadcrumb-item {
      display: flex;
      align-items: center;
    }

    .breadcrumb-item:not(:last-child)::after {
      content: "/";
      margin: 0 0.5rem;
      color: var(--gray);
    }

    .breadcrumb-item:last-child {
      font-weight: 500;
      color: var(--text);
    }

    .welcome-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* ===== Cabeçalho da Página - Melhorado ===== */
    .page-header {
      margin-bottom: 2.5rem;
      position: relative;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid var(--gray-light);
      animation: fadeInDown 0.8s ease-out;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .page-title {
      font-size: 2.2rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
      position: relative;
      display: inline-block;
    }

    .page-title::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 80px;
      height: 4px
background: var(--primary);
      border-radius: 2px;
      transition: width 0.3s ease;
    }

    .page-title:hover::after {
      width: 120px;
    }

    .page-subtitle {
      color: var(--gray);
      font-size: 1.1rem;
    }

    /* ===== Status do Projeto - Melhorado ===== */
    .project-status {
      position: absolute;
      top: 0;
      right: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--warning);
      color: var(--dark);
      padding: 0.6rem 1.2rem;
      border-radius: var(--border-radius);
      font-size: 0.9rem;
      font-weight: 500;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
    }

    .project-status:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    }

    .project-status.in-progress {
      background: var(--primary);
      color: var(--white);
    }

    .project-status.completed {
      background: var(--success);
      color: var(--white);
    }

    /* ===== Cards do Dashboard - Melhorados ===== */
    .dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2.5rem;
      animation: fadeInUp 0.8s ease-out both;
      animation-delay: 0.1s;
    }

    .dashboard-card {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      padding: 1.8rem;
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.03);
    }

    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-shadow-hover);
    }

    .dashboard-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--primary);
    }

    .card-label {
      font-size: 0.9rem;
      color: var(--gray);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }

    .card-label i {
      color: var(--primary);
      font-size: 1rem;
      transition: var(--transition);
    }

    .dashboard-card:hover .card-label i {
      transform: scale(1.2);
    }

    .card-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--dark);
      transition: var(--transition);
    }

    .dashboard-card:hover .card-value {
      color: var(--primary);
    }

    /* ===== Seções de Conteúdo - Melhoradas ===== */
    .section-container {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      padding: 2rem;
      margin-bottom: 2.5rem;
      transition: var(--transition);
      animation: fadeInUp 0.8s ease-out both;
      position: relative;
      border: 1px solid rgba(0,0,0,0.03);
    }

    .section-container:nth-child(2) { animation-delay: 0.2s; }
    .section-container:nth-child(3) { animation-delay: 0.3s; }
    .section-container:nth-child(4) { animation-delay: 0.4s; }
    .section-container:nth-child(5) { animation-delay: 0.5s; }

    .section-container:hover {
      box-shadow: var(--card-shadow-hover);
      transform: translateY(-5px);
    }

    .section-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 0;
      background: var(--primary);
      transition: height 0.4s ease;
      border-radius: var(--border-radius) 0 0 var(--border-radius);
    }

    .section-container:hover::before {
      height: 100%;
    }

    .section-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      border-bottom: 2px solid var(--gray-light);
      padding-bottom: 0.85rem;
      transition: var(--transition);
    }

    .section-title i {
      color: var(--primary);
      transition: var(--transition);
    }

    .section-container:hover .section-title i {
      transform: rotate(10deg) scale(1.1);
    }

    .introduction-text {
      margin-bottom: 1.5rem;
      line-height: 1.7;
    }

    .introduction-text p {
      margin-bottom: 1rem;
      text-align: justify;
    }

    .introduction-text p:last-child {
      margin-bottom: 0;
    }

    /* ===== Dashboard de Progresso - Melhorado ===== */
    .progress-section {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .progress-card {
      background: var(--blue-light);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      text-align: center;
      transition: var(--transition);
      border: 1px solid rgba(0,0,0,0.03);
    }

    .progress-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-shadow);
    }

    .progress-title {
      font-weight: 500;
      margin-bottom: 1rem;
      color: var(--primary);
    }

    .progress-bar-container {
      width: 100%;
      height: 10px;
      background: var(--gray-light);
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 0.75rem;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.15);
    }

    .progress-bar {
      height: 100%;
      background: var(--primary);
      border-radius: 5px;
      transition: width 1s ease;
      background-image: linear-gradient(45deg, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%, transparent);
      background-size: 1rem 1rem;
      animation: progress-bar-stripes 1s linear infinite;
    }

    @keyframes progress-bar-stripes {
      from { background-position: 1rem 0; }
      to { background-position: 0 0; }
    }

    .progress-value {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--primary);
      transition: var(--transition);
    }

    .progress-card:hover .progress-value {
      transform: scale(1.1);
    }

    /* ===== Gráficos - Melhorados ===== */
   .progress-chart-container, .chart-container {
  background-color: var(--white);
  border-radius: var(--border-radius);
  padding: 1rem;
  box-shadow: var(--card-shadow);
  transition: var(--transition);
  margin-top: 2rem;
  margin-bottom: 7rem; /* Aumentada de 2rem para 7rem */
  border: 1px solid rgba(0,0,0,0.03);
  position: relative;
  z-index: 1;
  clear: both;
}
    /* Ajuste para evitar sobreposição de gráficos */
.test-table-container {
  margin-top: 8rem;
  position: relative;
  z-index: 2;
  clear: both;
}

#nonconformities-chart {
  margin-bottom: 5rem !important;
}
    .progress-chart-container:hover, .chart-container:hover {
      box-shadow: var(--card-shadow-hover);
      transform: translateY(-3px);
    }

    /* ===== Grid de Equipe - Melhorado ===== */
    .team-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 1.5rem;
    }

    .team-member {
      background: var(--section-bg);
      border-radius: var(--border-radius);
      padding: 1.8rem;
      text-align: center;
      transition: var(--transition);
      border-top: 4px solid var(--primary);
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(0,0,0,0.03);
    }

    .team-member:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-shadow-hover);
    }

    .member-position {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--primary);
    }

    .member-role {
      font-size: 0.85rem;
      color: var(--gray);
      margin-bottom: 0.5rem;
      padding: 0.3rem 0.6rem;
      background-color: var(--light);
      display: inline-block;
      border-radius: 15px;
    }

    .member-name {
      font-weight: 500;
      color: var(--dark);
      transition: var(--transition);
    }

    .team-member:hover .member-name {
      color: var(--primary);
    }

    .member-contact {
      margin-top: 1rem;
      font-size: 0.85rem;
      color: var(--gray);
      transition: var(--transition);
    }

    .team-member:hover .member-contact {
      color: var(--primary-dark);
    }

    /* ===== Ações - Melhoradas ===== */
    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    /* ===== Visualizador de PDF - Melhorado ===== */
    .pdf-viewer {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      overflow: hidden;
      display: none;
      border: 1px solid rgba(0,0,0,0.03);
    }

    .pdf-viewer.active {
      display: block;
      animation: fadeInUp 0.5s ease-out;
    }

    .pdf-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--section-bg);
    }

    .pdf-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--primary);
    }

    .pdf-meta {
      display: flex;
      gap: 1.5rem;
      color: var(--gray);
      font-size: 0.9rem;
    }

    .pdf-container {
      height: 75vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: var(--section-bg);
      position: relative;
      overflow: auto;
    }

    #pdf-canvas {
      max-width: 100%;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
    }

    /* ===== Indicador de Carregamento - Melhorado ===== */
    .loading-indicator {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
      backdrop-filter: blur(5px);
    }

    .loading-indicator.hidden {
      display: none;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top: 5px solid var(--primary);
      animation: spin 1s linear infinite;
      margin-bottom: 1.2rem;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      font-weight: 500;
      color: var(--primary);
    }

    /* ===== Ações do PDF - Melhoradas ===== */
    .pdf-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-bottom: 1rem;
      padding: 1rem 1.5rem;
      background-color: var(--white);
      border-bottom: 1px solid var(--gray-light);
    }

    /* ===== Controles do PDF - Melhorados ===== */
    .pdf-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--gray-light);
      background: var(--section-bg);
    }

    .pdf-navigation, .pdf-zoom {
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .page-info {
      font-size: 0.9rem;
      font-weight: 500;
      padding: 0.6rem 1rem;
      background: var(--white);
      border-radius: var(--border-radius);
      display: flex;
      align-items: center;
      min-width: 100px;
      justify-content: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .btn-control {
      background: var(--white);
      color: var(--text);
      border: 1px solid var(--gray-light);
      padding: 0.6rem 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: var(--transition);
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .btn-control:hover {
      background: var(--primary);
      color: var(--white);
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .zoom-level {
      font-size: 0.9rem;
      min-width: 60px;
      text-align: center;
      padding: 0.6rem 0;
      font-weight: 500;
      color: var(--primary);
    }

    /* ===== Modal de Pesquisa - Melhorado ===== */
    .search-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    .search-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transform: translateY(30px);
      transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .search-modal.active .modal-content {
      transform: translateY(0);
    }

    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--section-bg);
    }

    .modal-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
    }

    .close-modal {
      background: none;
      border: none;
      color: var(--gray);
      font-size: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-modal:hover {
      color: var(--danger);
      background-color: rgba(220, 53, 69, 0.1);
    }

    .search-results {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
    }

    /* ===== Resultados da Pesquisa - Melhorados ===== */
    .result-item {
      padding: 1.2rem;
      border-bottom: 1px solid var(--gray-light);
      cursor: pointer;
      transition: var(--transition);
      border-radius: var(--border-radius-sm);
      margin-bottom: 0.8rem;
    }

    .result-item:hover {
      background: var(--blue-light);
      transform: translateX(5px);
    }

    .result-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .result-title {
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--primary);
      transition: var(--transition);
    }

    .result-item:hover .result-title {
      color: var(--primary-dark);
    }

    .result-snippet {
      font-size: 0.9rem;
      color: var(--gray-dark);
      margin-bottom: 0.8rem;
      line-height: 1.5;
    }

    .result-meta {
      font-size: 0.8rem;
      color: var(--gray);
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }

    .result-meta::before {
      content: '•';
      color: var(--primary);
      font-size: 1.2rem;
    }

    .highlight {
      background: rgba(255, 193, 7, 0.3);
      padding: 0 2px;
      border-radius: 2px;
      font-weight: 500;
    }

    /* ===== Efeito de Skeleton Loading - Melhorado ===== */
    .skeleton {
      background: linear-gradient(90deg, var(--gray-light) 25%, #ededed 50%, var(--gray-light) 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite ease-in-out;
      border-radius: var(--border-radius-sm);
    }

    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* ===== Rodapé - Melhorado ===== */
    .footer {
      background: var(--white);
      border-top: 1px solid var(--gray-light);
      padding: 1.5rem 2rem;
      text-align: center;
      box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.03);
    }

    .footer-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-logo {
      height: 30px;
      transition: var(--transition);
    }

    .footer-logo:hover {
      transform: scale(1.05);
    }

    .footer-text {
      font-size: 0.9rem;
      color: var(--gray);
    }

    .footer-links {
      display: flex;
      gap: 1.5rem;
    }

    .footer-link {
      color: var(--gray);
      font-size: 0.9rem;
      transition: var(--transition);
      position: relative;
    }

    .footer-link::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: var(--transition);
    }

    .footer-link:hover {
      color: var(--primary);
    }

    .footer-link:hover::after {
      width: 100%;
    }

    /* ===== Overlay para Feedback - Melhorado ===== */
    .feedback-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    .feedback-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .feedback-form {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      width: 90%;
      max-width: 500px;
      padding: 2rem;
      transform: translateY(30px);
      transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .feedback-overlay.active .feedback-form {
      transform: translateY(0);
    }

    .feedback-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--primary);
      border-bottom: 2px solid var(--gray-light);
      padding-bottom: 0.8rem;
    }

    .feedback-input {
      width: 100%;
      padding: 0.8rem 1rem;
      border-radius: var(--border-radius-sm);
      border: 1px solid var(--gray-light);
      font-size: 0.9rem;
      margin-bottom: 1rem;
      resize: none;
      transition: var(--transition);
    }

    .feedback-input:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(45, 125, 210, 0.1);
    }

    .feedback-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    /* ===== Notificações Toast - Melhoradas ===== */
    .toast-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1010;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .toast {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-width: 280px;
      max-width: 350px;
      transform: translateX(100%);
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 1px solid rgba(0,0,0,0.05);
    }

    .toast.active {
      transform: translateX(0);
    }

    .toast-success {
      border-left: 4px solid var(--success);
    }

    .toast-success .toast-icon {
      color: var(--success);
    }

    .toast-warning {
      border-left: 4px solid var(--warning);
    }

    .toast-warning .toast-icon {
      color: var(--warning);
    }

    .toast-error {
      border-left: 4px solid var(--danger);
    }

    .toast-error .toast-icon {
      color: var(--danger);
    }

    .toast-content {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-right: 0.5rem;
    }

    .toast-icon {
      font-size: 1.5rem;
    }

    .toast-message {
      font-weight: 500;
      font-size: 0.9rem;
    }

    .close-toast {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--gray);
      transition: var(--transition);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-toast:hover {
      color: var(--danger);
      background-color: rgba(220, 53, 69, 0.1);
    }

    /* ===== Subcapítulos e Descrições - Melhorados ===== */
    .nav-subcategory {
      margin-bottom: 0.5rem;
    }
    
    .subcategory-header {
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.7rem;
      color: var(--primary);
      font-weight: 500;
      border-radius: var(--border-radius-sm);
    }
    
    .subcategory-header:hover {
      background: var(--section-bg);
    }
    
    .subcategory-chevron, .third-level-chevron {
      margin-left: auto;
      font-size: 0.8rem;
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      color: var(--gray);
    }
    
    .nav-subcategory.active .subcategory-chevron {
      transform: rotate(90deg);
      color: var(--primary);
    }
    
    .nav-subitem.active .third-level-chevron {
      transform: rotate(90deg);
      color: var(--primary);
    }
    
    .subcategory-menu {
      display: none;
      margin-left: 1.2rem;
      animation: fadeIn 0.4s ease-out;
    }
    
    .nav-subcategory.active .subcategory-menu {
      display: block;
    }
    
    .nav-subitem {
      padding: 0.65rem 1.5rem 0.65rem 2.5rem;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      border-left: 3px solid transparent;
      flex-wrap: wrap;
      border-radius: var(--border-radius-sm);
    }
    
    .nav-subitem:hover {
      background: var(--section-bg);
    }
    
    .nav-subitem.active {
      background: var(--blue-light);
      border-left-color: var(--primary);
    }
    
    .third-level-menu {
      display: none;
      width: 100%;
      padding-left: 1.5rem;
      margin-top: 0.5rem;
      animation: fadeIn 0.4s ease-out;
    }
    
    .nav-subitem.active .third-level-menu {
      display: block;
    }
    
    .nav-third-item {
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.
7rem;
      border-left: 3px solid transparent;
      font-size: 0.9rem;
      flex-wrap: wrap;
      border-radius: var(--border-radius-sm);
    }
    
    .nav-third-item:hover {
      background: var(--section-bg);
    }
    
    .nav-third-item.active {
      background: var(--blue-light);
      border-left-color: var(--primary);
    }
    
    /* ===== Descrição dos Capítulos - Melhorada ===== */
    .chapter-description {
      padding: 0.3rem 0 0.2rem;
      font-size: 0.8rem;
      color: var(--gray);
      width: 100%;
      font-style: italic;
      line-height: 1.3;
      transition: var(--transition);
    }

    .nav-item:hover .chapter-description,
    .nav-subitem:hover .chapter-description,
    .nav-third-item:hover .chapter-description {
      color: var(--primary-dark);
    }
    
    /* Botão para voltar à página inicial - Melhorado */
    .back-to-home {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background-color: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      z-index: 99;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      opacity: 0;
      transform: translateY(20px);
    }
    
    .back-to-home.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .back-to-home:hover {
      background-color: var(--primary-dark);
      transform: translateY(-5px) scale(1.1);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    
    .back-to-home i {
      font-size: 1.5rem;
    }

    /* ===== Tabela de Estatísticas - Melhorada ===== */
    .test-table-container {
      overflow-x: auto;
      margin-bottom: 2rem;
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      transition: var(--transition);
    }
    
    .test-table-container:hover {
      box-shadow: var(--card-shadow-hover);
    }
    
    .test-table {
      width: 100%;
      border-collapse: collapse;
      border-radius: var(--border-radius);
      overflow: hidden;
    }
    
    .test-table thead {
      background-color: var(--primary);
      color: var(--white);
    }
    
    .test-table th, .test-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--gray-light);
    }
    
    .test-table tbody tr {
      transition: var(--transition);
    }
    
    .test-table tbody tr:hover {
      background-color: var(--blue-light);
    }
    
    .test-table tbody tr:nth-child(even) {
      background-color: var(--section-bg);
    }
    
    .test-table tbody tr:nth-child(even):hover {
      background-color: var(--blue-light);
    }
    
    .test-count {
      font-weight: 500;
      text-align: center;
    }
    
    .test-table tfoot {
      background-color: var(--blue-light);
      font-weight: bold;
    }

    /* Cartões de informação */
    .info-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .info-card {
      background-color: var(--white);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      border-left: 4px solid var(--primary);
    }
    
    .info-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-shadow-hover);
    }
    
    .info-card h3 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      color: var(--primary);
      font-size: 1.1rem;
      border-bottom: 1px solid var(--gray-light);
      padding-bottom: 0.5rem;
    }
    
    .info-card ul {
      list-style: none;
      padding: 0;
    }
    
    .info-card li {
      position: relative;
      padding-left: 1.5rem;
      margin-bottom: 0.5rem;
      line-height: 1.5;
    }
    
    .info-card li:before {
      content: "•";
      position: absolute;
      left: 0;
      color: var(--primary);
      font-weight: bold;
    }

    /* ===== Modo Escuro ===== */
    .dark-mode-toggle {
      margin-left: 1rem;
      background: none;
      border: none;
      color: var(--gray);
      font-size: 1.2rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    .dark-mode-toggle:hover {
      background-color: var(--blue-light);
      color: var(--primary);
    }
    
    body.dark-mode {
      --white: #1a1d21;
      --light: #12151a;
      --dark: #f8f9fa;
      --text: #e1e1e1;
      --section-bg: #242830;
      --gray-light: #374151;
      --gray: #9ca3af;
      --blue-light: #1e293b;
      --primary-light: #60a5fa;
      color: var(--text);
    }
    
    body.dark-mode .top-navbar,
    body.dark-mode .sidebar,
    body.dark-mode .footer {
      background: var(--white);
      border-color: var(--gray-light);
    }
    
    body.dark-mode .dashboard-card,
    body.dark-mode .section-container,
    body.dark-mode .pdf-viewer,
    body.dark-mode .modal-content,
    body.dark-mode .feedback-form,
    body.dark-mode .toast,
    body.dark-mode .info-card {
      background: var(--white);
      border-color: var(--gray-light);
    }
    
    body.dark-mode .nav-item:hover,
    body.dark-mode .nav-subitem:hover,
    body.dark-mode .nav-third-item:hover,
    body.dark-mode .category-header:hover,
    body.dark-mode .subcategory-header:hover,
    body.dark-mode .test-table tbody tr:hover {
      background: var(--section-bg);
    }
    
    body.dark-mode .test-table tbody tr:nth-child(even) {
      background-color: rgba(255,255,255,0.05);
    }
    
    body.dark-mode .search-input,
    body.dark-mode .chapter-search,
    body.dark-mode .feedback-input {
      background-color: var(--section-bg);
      border-color: var(--gray-light);
      color: var(--text);
    }
    
    body.dark-mode .badge,
    body.dark-mode .btn-control {
      background-color: var(--section-bg);
      color: var(--text);
    }
    
    body.dark-mode .pdf-container {
      background-color: #0d1117;
    }
    
    /* ===== Atalhos de Teclado ===== */
    .keyboard-shortcuts {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background-color: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      padding: 1rem;
      z-index: 99;
      transition: var(--transition);
      opacity: 0;
      transform: translateY(20px);
      max-width: 300px;
    }
    
    .keyboard-shortcuts.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .shortcuts-title {
      font-weight: 600;
      margin-bottom: 0.8rem;
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--gray-light);
      padding-bottom: 0.5rem;
    }
    
    .shortcuts-title button {
      background: none;
      border: none;
      color: var(--gray);
      cursor: pointer;
      font-size: 1.1rem;
      transition: var(--transition);
    }
    
    .shortcuts-title button:hover {
      color: var(--danger);
    }
    
    .shortcut-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .shortcut-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }
    
    .shortcut-key {
      background-color: var(--section-bg);
      padding: 0.2rem 0.5rem;
      border-radius: var(--border-radius-sm);
      font-family: monospace;
      font-weight: 500;
    }
    
    /* ===== Comparador de Documentos ===== */
    .comparator-container {
      display: none;
      flex-direction: column;
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      overflow: hidden;
      animation: fadeInUp 0.5s ease-out;
    }
    
    .comparator-container.active {
      display: flex;
    }
    
    .comparator-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--section-bg);
    }
    
    .comparator-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--primary);
    }
    
    .comparator-content {
      display: flex;
      height: calc(100vh - 250px);
    }
    
    .comparator-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      border-right: 1px solid var(--gray-light);
    }
    
    .comparator-panel:last-child {
      border-right: none;
    }
    
    .panel-header {
      padding: 1rem;
      background: var(--blue-light);
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .panel-title {
      font-weight: 500;
      color: var(--primary);
    }
    
    .panel-content {
      flex: 1;
      overflow: auto;
      padding: 1rem;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    
    .comparator-canvas {
      max-width: 100%;
      box-shadow: var(--card-shadow);
    }
    
    .comparator-controls {
      padding: 1rem;
      background: var(--section-bg);
      border-top: 1px solid var(--gray-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .comparator-actions {
      display: flex;
      gap: 1rem;
    }

    /* ===== Responsividade - Melhorada ===== */
    @media (max-width: 1200px) {
      .sidebar {
        width: 300px;
      }
      
      .main-content {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
      }
      
      .splash-title {
        font-size: 3rem;
      }
    }
    
    @media (max-width: 992px) {
      .splash-title {
        font-size: 2.5rem;
      }
      
      .splash-subtitle {
        font-size: 1.1rem;
      }
      
      .top-navbar {
        padding: 0 1rem;
      }
      
      .navbar-title {
        font-size: 1.1rem;
      }
      
      .dashboard-cards {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      
      .footer-content {
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
      }
      
      .footer-text {
        order: 3;
        width: 100%;
        margin-top: 1rem;
      }
      
      .comparator-content {
        flex-direction: column;
        height: auto;
      }
      
      .comparator-panel {
        border-right: none;
        border-bottom: 1px solid var(--gray-light);
      }
      
      .comparator-panel:last-child {
        border-bottom: none;
      }
    }
    
    @media (max-width: 768px) {
      body {
        font-size: 14px;
      }
      
      .splash-title {
        font-size: 2rem;
      }
      
      .splash-subtitle {
        font-size: 1rem;
      }
      
      .splash-logo {
        max-height: 80px;
      }
      
      .menu-toggle {
        display: flex;
      }
      
      .search-form {
        width: auto;
        flex: 1;
        margin-right: 1rem;
      }
      
      .navbar-title {
        display: none;
      }
      
      .sidebar {
        position: fixed;
        top: 80px;
        left: -320px;
        z-index: 90;
        box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
        width: 280px;
      }
      
      .sidebar.active {
        left: 0;
      }
      
      .main-content {
        padding: 1.5rem 1rem;
      }
      
      .page-title {
        font-size: 1.8rem;
      }
      
      .page-header {
        margin-bottom: 1.5rem;
      }
      
      .dashboard-cards,
      .progress-section,
      .team-grid,
      .info-cards {
        grid-template-columns: 1fr;
      }
      
      .section-container {
        padding: 1.5rem;
      }
      
      .project-status {
        position: static;
        margin-top: 1rem;
        width: 100%;
        justify-content: center;
      }
      
      .pdf-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      
      .pdf-meta {
        margin-top: 0.5rem;
      }
      
      .pdf-actions {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .pdf-controls {
        flex-direction: column;
        gap: 1rem;
      }
      
      .pdf-navigation,
      .pdf-zoom {
        width: 100%;
        justify-content: center;
      }
      
      .pdf-container {
        height: 60vh;
      }
      
      .action-buttons {
        justify-content: center;
      }
      
      .footer-content {
        flex-direction: column;
        gap: 1rem;
      }
      
      .footer-links {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .keyboard-shortcuts,
      .back-to-home {
        bottom: 20px;
      }
      
      .keyboard-shortcuts {
        left: 20px;
        max-width: 250px;
      }
      
      .back-to-home {
        right: 20px;
      }
    }
    
    @media (max-width: 576px) {
      .splash-title {
        font-size: 1.8rem;
      }
      
      .splash-logo {
        max-height: 70px;
      }
      
      .breadcrumb {
        font-size: 0.85rem;
        padding: 0.75rem 1rem;
      }
      
      .top-navbar {
        height: 70px;
        padding: 0 0.75rem;
      }
      
      .brand-logo {
        max-height: 50px;
      }
      
      .sidebar {
        top: 70px;
        width: 250px;
      }
      
      .pdf-container {
        height: 50vh;
      }
      
      .toast {
        min-width: auto;
        width: calc(100% - 40px);
        max-width: none;
      }
      
      .toast-container {
        bottom: 10px;
        right: 10px;
        left: 10px;
        align-items: center;
      }
    }

    /* Animações adicionais */
    @keyframes floatUp {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .float-animation {
      animation: floatUp 3s ease-in-out infinite;
    }
    
    @keyframes fadeInLeft {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .fade-in-left {
      animation: fadeInLeft 0.8s ease-out;
    }
    
    @keyframes fadeInRight {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .fade-in-right {
      animation: fadeInRight 0.8s ease-out;
    }
  </style>
  
  <style>
    /* Uniformizar descrições de capítulos */
    .chapter-description {
      display: block;
      width: 100%;
      padding: 0.3rem 0 0.5rem;
      font-size: 0.8rem;
      color: var(--gray);
      font-style: italic;
      line-height: 1.3;
      clear: both;
    }
    
    .nav-item, .nav-subitem, .nav-third-item {
      flex-wrap: wrap;
    }
    
    /* Aumentar largura do índice */
    .sidebar {
      width: 380px;
    }
    
    /* Ajustar layout quando o índice for mais largo */
    @media (max-width: 1200px) {
      .main-content {
        padding-left: 1rem;
      }
    }
    
    /* Tabela de Ensaios - Estilos adicionais */
    .test-table-container {
      margin-top: 2rem;
    }
    
    .test-table th {
      position: sticky;
      top: 0;
      background-color: var(--primary);
      z-index: 10;
    }
    
    .progress-bar-table {
      height: 12px;
      background: var(--gray-light);
      border-radius: 6px;
      overflow: hidden;
      width: 100%;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 6px;
      transition: width 1s ease;
    }
  </style>
  
  <style>
  /* Estilo para a referência do cliente */
  .client-reference {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: auto;
    margin-right: 1.5rem;
    font-size: 0.9rem;
  }
  
  .client-logo {
    height: 30px;
    max-width: 100px;
  }
  
  /* Ajuste da barra de navegação */
  .navbar-brand {
    margin-right: 0;
  }
  
  .navbar-tools {
    margin-left: 0;
  }
  
  @media (max-width: 992px) {
    .client-reference span {
      display: none;
    }
    
    .client-logo {
      height: 24px;
    }
  }
  
  @media (max-width: 768px) {
    .client-reference {
      display: none;
    }
  }
</style>
  
  <style>
  /* Estilos para a validação no rodapé */
  .footer-validation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--gray-light);
  }
  
  .validation-hash {
    font-size: 0.8rem;
    color: var(--gray);
  }
  
  .validation-hash code {
    background-color: rgba(0, 0, 0, 0.03);
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-family: monospace;
  }
  
  .qr-code {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.3rem;
  }
  
  .qr-text {
    font-size: 0.7rem;
    color: var(--gray);
  }
  
  @media (max-width: 768px) {
    .footer-validation {
      flex-direction: column;
      gap: 1rem;
    }
  }
</style>
  
  <style>
  /* Estilos para o Certificado Final */
  .certificate-container {
    background-color: #fff;
    border: 1px solid var(--gray-light);
    border-radius: var(--border-radius);
    padding: 3rem 2rem;
    margin-bottom: 3rem;
    position: relative;
    overflow: hidden;
  }
  
  .certificate-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 8px;
    background: linear-gradient(to right, var(--primary), var(--primary-light));
  }
  
  .certificate-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--gray-light);
  }
  
  .certificate-logo {
    height: 50px;
  }
  
  .certificate-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--primary);
    text-align: center;
  }
  
  .certificate-content {
    margin-bottom: 2.5rem;
    line-height: 1.8;
  }
  
  .certificate-intro {
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
  }
  
  .certificate-project-details {
    background-color: var(--section-bg);
    padding: 1.5rem;
    border-radius: var(--border-radius);
    margin-bottom: 1.5rem;
    text-align: center;
  }
  
  .certificate-project-details h3 {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 1rem;
  }
  
  .certificate-statement, .certificate-validation {
    margin-bottom: 1.5rem;
  }
  
  .certificate-signatures {
    display: flex;
    justify-content: space-between;
    margin-top: 3rem;
  }
  
  .certificate-signature {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 200px;
  }
  
  .signature-image {
    max-height: 60px;
    margin-bottom: 0.5rem;
  }
  
  .signature-line {
    width: 100%;
    height: 1px;
    background-color: var(--gray);
    margin-bottom: 0.5rem;
  }
  
  .signature-name {
    font-weight: 600;
  }
  
  .signature-role {
    font-size: 0.8rem;
    color: var(--gray);
  }
  
  .certificate-seal {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  .seal-image {
    font-size: 3rem;
    color: var(--primary);
    opacity: 0.7;
    margin-bottom: 0.5rem;
  }
  
  .seal-text {
    font-weight: 600;
    font-size: 0.9rem;
  }
  
  .seal-date {
    font-size: 0.8rem;
    color: var(--gray);
  }
  
  .certificate-footer {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2rem;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid var(--gray-light);
  }
  
  .verification-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  .verification-code, .verification-hash {
    font-family: monospace;
    font-size: 0.8rem;
    color: var(--gray);
  }
  
  @media (max-width: 768px) {
    .certificate-header,
    .certificate-signatures {
      flex-direction: column;
      gap: 1.5rem;
      align-items: center;
    }
    
    .certificate-footer {
      flex-direction: column;
    }
  }
</style>
</head>
<body>
  <!-- Splash Screen / Capa Inicial - Melhorada -->
  <div class="splash-screen" id="splash-screen">
    <div class="splash-content">
      <img src="assets/images/logoasch.png" alt="Logo ASCH" class="splash-logo">
      <h1 class="splash-title">Dossier Final da Qualidade</h1>
      <p class="splash-subtitle">Projeto Alba – Nuevas Plantas de Poliolefinas, Plataformas Logísticas y Offsites</p>
      <button class="btn btn-primary btn-lg" onclick="enterDossier()">
        <i class="fas fa-book-open"></i> Entrar no Dossier
      </button>
      <div id="splash-date" style="color: white; margin-top: 2rem; font-size: 0.9rem;">Última atualização: 31 de março de 2025</div>
    </div>
  </div>

  <!-- Toast notifications - Melhoradas -->
  <div class="toast-container" id="toast-container">
    <!-- Toasts will be added here dynamically -->
  </div>

  <!-- Conteúdo Principal da Aplicação - Melhorado -->
  <div class="app-container" id="app-container">
    <!-- Top Navigation Bar - Melhorada -->
    <header class="top-navbar">
      <button class="menu-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="navbar-brand">
        <img src="assets/images/logoasch.png" alt="Logo ASCH" class="brand-logo">
        <div class="navbar-title">Dossier da Qualidade</div>
      </div>
      <!-- Adição do logótipo e referência da Repsol -->
<div class="client-reference">
  <span>Cliente:</span>
  <img src="assets/images/logorepsol.jpg" alt="Logo Repsol" class="client-logo">
  <span>Repsol Polímeros S.A.</span>
</div>
      <div class="navbar-tools">
        <form class="search-form" onsubmit="return performSearch()">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" placeholder="Pesquisar no dossier..." id="global-search">
        </form>
        <button class="btn-control" id="btn-feedback" onclick="showFeedbackForm()">
          <i class="fas fa-comment-alt"></i> Feedback
        </button>
        <button class="dark-mode-toggle" id="dark-mode-toggle" title="Alternar modo escuro">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </header>

    <div class="main-container">
      <!-- Sidebar Navigation - Melhorada -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2 class="sidebar-title">
            <i class="fas fa-folder"></i> Índice do Dossier
          </h2>
          <div class="search-chapters">
            <i class="fas fa-search chapter-search-icon"></i>
            <input type="text" class="chapter-search" placeholder="Filtrar capítulos..." id="chapter-search" oninput="filterChapters()">
          </div>
        </div>

        <div class="navigation">
          <!-- 1.0 Sistema de Gestão da Qualidade -->
          <div class="nav-category" data-section="sgq">
            <div class="category-header" onclick="toggleCategory(this.parentElement)">
              <div class="header-title">
                <i class="fas fa-tasks"></i>
                <span>1.0 – Sistema de Gestão da Qualidade</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="loadPdf('PQ.pdf', '1.1 – Plano da Qualidade (PQ)')">
                <i class="fas fa-clipboard-list"></i>
                <span>1.1 – Plano da Qualidade</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Documentação principal que define os requisitos da qualidade do projeto</div>
              </div>
              <div class="nav-item" onclick="loadPdf('PIE.pdf', '1.2 – Plano de Inspeção e Ensaios (PIE)')">
                <i class="fas fa-vial"></i>
                <span>1.2 – Plano de Inspeção e Ensaios</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Plano detalhado das inspeções e ensaios realizados durante o projeto</div>
              </div>
              <div class="nav-item" onclick="loadPdf('CC.pdf', '1.3 – Certificados de Calibração')">
                <i class="fas fa-ruler"></i>
                <span>1.3 – Certificados de Calibração</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Documentos que comprovam a calibração dos equipamentos de medição</div>
              </div>
              
              <!-- 1.4 Certificados de Materiais com Subcapítulos -->
              <div class="nav-subcategory">
                <div class="subcategory-header" onclick="toggleSubcategory(this.parentElement)">
                  <i class="fas fa-file-contract"></i>
                  <span>1.4 – Certificados de Materiais</span>
                  <i class="fas fa-chevron-right subcategory-chevron"></i>
                </div>
                <div class="subcategory-menu">
                  <div class="nav-subitem" onclick="loadPdf('CM-mb.pdf', '1.4.1 – Materiais Base')">
                    <i class="fas fa-circle-dot"></i>
                    <span>1.4.1 – Materiais Base</span>
                    <div class="chapter-description">Certificados de materiais estruturais e base utilizados na obra</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('CM-pfb.pdf', '1.4.2 – Pré-fabricados de Betão')">
                    <i class="fas fa-circle-dot"></i>
                    <span>1.4.2 – Pré-fabricados de Betão</span>
                    <div class="chapter-description">Certificados dos elementos pré-fabricados em betão</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('CM-tb.pdf', '1.4.3 – Tubagem')">
                    <i class="fas fa-circle-dot"></i>
                    <span>1.4.3 – Tubagem</span>
                    <div class="chapter-description">Certificados de qualidade das tubagens instaladas</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('CM-imp.pdf', '1.4.4 – Impermeabilização')">
                    <i class="fas fa-circle-dot"></i>
                    <span>1.4.4 – Impermeabilização</span>
                    <div class="chapter-description">Certificados dos materiais de impermeabilização</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('CM-arg.pdf', '1.4.5 – Argamassas e Cimentos')">
                    <i class="fas fa-circle-dot"></i>
                    <span>1.4.5 – Argamassas e Cimentos</span>
                    <div class="chapter-description">Certificados das argamassas e cimentos utilizados</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('CM-aces.pdf', '1.4.6 – Materiais e Acessórios')">
                    <i class="fas fa-circle-dot"></i>
                    <span>1.4.6 – Materiais e Acessórios</span>
                    <div class="chapter-description">Certificados de acessórios e outros materiais complementares</div>
                  </div>
                </div>
              </div>
              
              <div class="nav-item" onclick="loadPdf('EM.pdf', '1.5 – Estudos de Materiais')">
                <i class="fas fa-chart-bar"></i>
                <span>1.5 – Estudos de Materiais</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Estudos e análises realizados nos materiais utilizados no projeto</div>
              </div>
            </div>
          </div>

          <!-- 2.0 Execução do Projeto -->
          <div class="nav-category" data-section="execucao">
            <div class="category-header" onclick="toggleCategory(this.parentElement)">
              <div class="header-title">
                <i class="fas fa-hard-hat"></i>
                <span>2.0 – Execução do Projeto</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <!-- 2.1 Obra Civil com Subcapítulos -->
              <div class="nav-subcategory">
                <div class="subcategory-header" onclick="toggleSubcategory(this.parentElement)">
                  <i class="fas fa-building"></i>
                  <span>2.1 – Obra Civil</span>
                  <i class="fas fa-chevron-right subcategory-chevron"></i>
                </div>
                <div class="subcategory-menu">
                  <div class="nav-subitem" onclick="loadPdf('2.1TO.pdf', '2.1.1 – Topografia')">
                    <i class="fas fa-circle-dot"></i>
                    <span>2.1.1 – Topografia</span>
                    <div class="chapter-description">Levantamentos topográficos e implantação da obra</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('2.1EST.pdf', '2.1.2 – Estruturas')">
                    <i class="fas fa-circle-dot"></i>
                    <span>2.1.2 – Estruturas</span>
                    <div class="chapter-description">Documentação das estruturas executadas no projeto</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('2.1EP.pdf', '2.1.3 – Ensaios e Provas')">
                    <i class="fas fa-circle-dot"></i>
                    <span>2.1.3 – Ensaios e Provas</span>
                    <div class="chapter-description">Resultados dos ensaios realizados em elementos civis</div>
                  </div>
                </div>
              </div>
              
              <!-- 2.2 Piping com Subcapítulos -->
              <div class="nav-subcategory">
                <div class="subcategory-header" onclick="toggleSubcategory(this.parentElement)">
                  <i class="fas fa-project-diagram"></i>
                  <span>2.2 – Piping</span>
                  <i class="fas fa-chevron-right subcategory-chevron"></i>
                </div>
                <div class="subcategory-menu">
                  <div class="nav-subitem" onclick="toggleThirdLevel(this)">
                    <i class="fas fa-circle-dot"></i>
                    <span>2.2.1 – Soldadura</span>
                    <i class="fas fa-chevron-right third-level-chevron"></i>
                    <div class="chapter-description">Processos e qualificações de soldadura</div>
                    
                    <div class="third-level-menu">
                      <div class="nav-third-item" onclick="loadPdf('2.2AC.pdf', '2.2.1.1 – Dossier Fabricação AC')">
                        <i class="fas fa-minus"></i>
                        <span>2.2.1.1 – Dossier Fabricação AC</span>
                        <div class="chapter-description">Documentação de fabricação de componentes em aço carbono</div>
                      </div>
                      <div class="nav-third-item" onclick="loadPdf('2.2HDPE.pdf', '2.2.1.2 – Dossier Fabricação HDPE')">
                        <i class="fas fa-minus"></i>
                        <span>2.2.1.2 – Dossier Fabricação HDPE</span>
                        <div class="chapter-description">Documentação de fabricação de componentes em HDPE</div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="nav-subitem" onclick="loadPdf('2.2TA.pdf', '2.2.2 – Tratamento Anti-Corrosivo')">
                    <i class="fas fa-circle-dot"></i>
                    <span>2.2.2 – Tratamento Anti-Corrosivo</span>
                    <div class="chapter-description">Processos e resultados dos tratamentos anticorrosivos aplicados</div>
                  </div>
                  <div class="nav-subitem" onclick="loadPdf('2.2EH.pdf', '2.2.3 – Provas Hidráulicas')">
                    <i class="fas fa-circle-dot"></i>
                    <span>2.2.3 – Provas Hidráulicas</span>
                    <div class="chapter-description">Resultados dos testes de pressão hidráulica</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 3.0 Documentos de Engenharia -->
          <div class="nav-category" data-section="documentos">
            <div class="category-header" onclick="toggleCategory(this.parentElement)">
              <div class="header-title">
                <i class="fas fa-drafting-compass"></i>
                <span>3.0 – Documentos de Engenharia</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="loadPdf('3.1PO.pdf', '3.1 – Especificações Técnicas')">
                <i class="fas fa-file-alt"></i>
                <span>3.1 – Especificações Técnicas</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Especificações técnicas dos materiais e processos</div>
              </div>
              <div class="nav-item" onclick="loadPdf('3.2PC.pdf', '3.2 – Planos Construtivos')">
                <i class="fas fa-blueprint"></i>
                <span>3.2 – Planos Construtivos</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Desenhos e planos usados durante a construção</div>
              </div>
              <div class="nav-item" onclick="loadPdf('3.3RL.pdf', '3.3 – Planos Red-Line')">
                <i class="fas fa-edit"></i>
                <span>3.3 – Planos Red-Line</span>
                <span class="doc-status review">Em revisão</span>
                <div class="chapter-description">Planos com anotações e modificações realizadas em obra</div>
              </div>
              <div class="nav-item" onclick="loadPdf('3.4AB.pdf', '3.4 – Planos As-Built')">
                <i class="fas fa-draw-polygon"></i>
                <span>3.4 – Planos As-Built</span>
                <span class="doc-status pending">Pendente</span>
                <div class="chapter-description">Planos finais que representam a obra tal como foi construída</div>
              </div>
            </div>
          </div>
          
          <!-- 4.0 Documentação Adicional -->
          <div class="nav-category" data-section="documentacao-adicional">
            <div class="category-header" onclick="toggleCategory(this.parentElement)">
              <div class="header-title">
                <i class="fas fa-file-alt"></i>
                <span>4.0 – Documentação Adicional</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="loadPdf('LF.pdf', '4.1 – Punch List')">
                <i class="fas fa-clipboard-check"></i>
                <span>4.1 – Punch List</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Lista de pendências e sua resolução durante a obra</div>
              </div>
              <div class="nav-item" onclick="loadPdf('NF.pdf', '4.2 – Relatório de Não Conformidades')">
                <i class="fas fa-exclamation-circle"></i>
                <span>4.2 – Relatório de Não Conformidades</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Relatório completo com as não conformidades e ações corretivas</div>
              </div>
              <div class="nav-item" onclick="loadPdf('MQ.pdf', '4.3 – Manual da Qualidade')">
                <i class="fas fa-book"></i>
                <span>4.3 – Manual da Qualidade</span>
                <span class="doc-status">Aprovado</span>
                <div class="chapter-description">Documento mestre do sistema de gestão da qualidade da obra</div>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Conteúdo Principal - Melhorado -->
      <main class="main-content">
        <div class="breadcrumb">
          <div class="breadcrumb-item"><a href="#" onclick="showWelcomeContent()">Início</a></div>
          <div class="breadcrumb-item" id="current-section">Visão Geral</div>
        </div>

        <!-- Conteúdo de Boas-Vindas / Dashboard - Melhorado -->
        <div class="welcome-content" id="welcome-content">
          <header class="page-header">
            <h1 class="page-title">Dossier Final da Qualidade</h1>
            <p class="page-subtitle">Projeto Alba – Nuevas Plantas de Poliolefinas, Plataformas Logísticas y Offsites</p>
            <div class="project-status">
              <i class="fas fa-check-circle"></i>
              <span>Projeto Concluído (98%) - Pendências em resolução</span>
            </div>
          </header>

          <!-- Cards do Dashboard - Melhorados -->
          <div class="dashboard-cards">
            <div class="dashboard-card">
              <div class="card-label"><i class="fas fa-building"></i> Cliente</div>
              <div class="card-value">REPSOL POLÍMEROS</div>
            </div>
            <div class="dashboard-card">
              <div class="card-label"><i class="fas fa-hard-hat"></i> Empreiteiro</div>
              <div class="card-value">ASCH INFRAESTRUCTURAS Y SERVICIOS S.A.</div>
            </div>
            <div class="dashboard-card">
              <div class="card-label"><i class="fas fa-calendar-alt"></i> Data de Início</div>
              <div class="card-value">Junho 2023</div>
            </div>
            <div class="dashboard-card">
              <div class="card-label"><i class="fas fa-flag-checkered"></i> Data de Conclusão</div>
              <div class="card-value">31/03/2025</div>
              <div style="font-size: 0.8rem; color: #dc3545; margin-top: 0.5rem;">
                <i class="fas fa-info-circle"></i> 1 pendência em resolução
              </div>
            </div>
            <div class="dashboard-card">
              <div class="card-label"><i class="fas fa-file-alt"></i> Número do Projeto</div>
              <div class="card-value">4001008</div>
            </div>
            <div class="dashboard-card">
              <div class="card-label"><i class="fas fa-code-branch"></i> Versão</div>
              <div class="card-value">Rev.000</div>
            </div>
          </div>

          <!-- Seção de Progresso do Projeto - Melhorada -->
          <div class="section-container">
            <h2 class="section-title"><i class="fas fa-chart-line"></i> Progresso do Projeto</h2>
            <div class="progress-section">
              <div class="progress-card">
                <h3 class="progress-title">Obra Civil</h3>
                <div class="progress-bar-container">
                  <div class="progress-bar" style="width: 100%;"></div>
                </div>
                <div class="progress-value">100%</div>
              </div>
              <div class="progress-card">
                <h3 class="progress-title">Piping</h3>
                <div class="progress-bar-container">
                  <div class="progress-bar" style="width: 100%;"></div>
                </div>
                <div class="progress-value">100%</div>
              </div>
              <div class="progress-card">
                <h3 class="progress-title">Elétrica</h3>
                <div class="progress-bar-container">
                  <div class="progress-bar" style="width: 100%;"></div>
                </div>
                <div class="progress-value">100%</div>
              </div>
              <div class="progress-card">
                <h3 class="progress-title">Instrumentação</h3>
                <div class="progress-bar-container">
                  <div class="progress-bar" style="width: 97%;"></div>
                </div>
                <div class="progress-value">97%</div>
              </div>
              <div class="progress-card">
                <h3 class="progress-title">Global</h3>
                <div class="progress-bar-container">
                  <div class="progress-bar" style="width: 98%;"></div>
                </div>
                <div class="progress-value">98%</div>
              </div>
            </div>
            
            <!-- Gráfico de Progresso - Melhorado -->
            <div class="progress-chart-container" style="height: 300px; margin-top: 1.5rem;">
              <canvas id="progress-chart"></canvas>
            </div>
          </div>

          <!-- Estatísticas de Ensaios - Melhoradas -->
          <div class="section-container">
            <h2 class="section-title"><i class="fas fa-vial"></i> Estatísticas de Ensaios</h2>
            
            <div class="test-table-container">
              <div class="dashboard-cards">
                <div class="dashboard-card">
                  <div class="card-label"><i class="fas fa-table"></i> Total de Ensaios</div>
                  <div class="card-value">422</div>
                </div>
                <div class="dashboard-card">
                  <div class="card-label"><i class="fas fa-check-circle"></i> Conformes</div>
                  <div class="card-value">417</div>
                </div>
                <div class="dashboard-card">
                  <div class="card-label"><i class="fas fa-times-circle"></i> Não Conformes</div>
                  <div class="card-value">5</div>
                </div>
                <div class="dashboard-card">
                  <div class="card-label"><i class="fas fa-clock"></i> Pendentes</div>
                  <div class="card-value">0</div>
                </div>
              </div>
              
              <!-- Gráfico de Não Conformidades - Melhorado -->
            <div class="chart-container" style="height: 300px; margin: 2rem 0 20rem 0; clear: both;">
                <canvas id="nonconformities-chart"></canvas>
              </div>
                
              <!-- Tabela de Ensaios - Melhorada -->
              <table class="test-table">
                <thead>
                  <tr>
                    <th>Tipo de Ensaio</th>
                    <th>Quantidade</th>
                    <th>Conformes</th>
                    <th>Não Conformes</th>
                    <th>Representação</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Betão</td>
                    <td class="test-count">230</td>
                    <td class="test-count">230</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Densidades</td>
                    <td class="test-count">40</td>
                    <td class="test-count">37</td>
                    <td class="test-count">3</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 92,5%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Solos</td>
                    <td class="test-count">10</td>
                    <td class="test-count">10</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Argamassas</td>
                    <td class="test-count">20</td>
                    <td class="test-count">20</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Placas de Carga</td>
                    <td class="test-count">7</td>
                    <td class="test-count">7</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Agregados</td>
                    <td class="test-count">4</td>
                    <td class="test-count">4</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Soldadura (NDT)</td>
                    <td class="test-count">22</td>
                    <td class="test-count">22</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Dielétrico (Xispómetro)</td>
                    <td class="test-count">22</td>
                    <td class="test-count">22</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Provas de Pressão</td>
                    <td class="test-count">3</td>
                    <td class="test-count">3</td>
                    <td class="test-count">0</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 100%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Linhas de água/oleosas</td>
                    <td class="test-count">40</td>
                    <td class="test-count">39</td>
                    <td class="test-count">1</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 97,5%;"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>Pintura</td>
                    <td class="test-count">25</td>
                    <td class="test-count">24</td>
                    <td class="test-count">1</td>
                    <td>
                      <div class="progress-bar-table">
                        <div class="progress-fill" style="width: 96%;"></div>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td><strong>Totais</strong></td>
                    <td class="test-count"><strong>422</strong></td>
                    <td class="test-count"><strong>417</strong></td>
                    <td class="test-count"><strong>5</strong></td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
              
              <!-- Cards de Informação - Melhorados -->
              <div class="info-cards">
                <div class="info-card">
                  <h3><i class="fas fa-info-circle"></i> Informações Adicionais</h3>
                  <ul>
                    <li>Taxa de conformidade global: <strong>98,82%</strong></li>
                    <li>Data de conclusão dos ensaios: <strong>31/03/2025</strong></li>
                    <li>Todos os ensaios foram concluídos dentro do prazo da obra</li>
                  </ul>
                </div>
                <div class="info-card">
                  <h3><i class="fas fa-exclamation-triangle"></i> Não Conformidades</h3>
                  <ul>
                    <li>Total de não conformidades: <strong>20</strong></li>
                    <li>Não conformidades resolvidas: <strong>19</strong></li>
                    <li>Não conformidades pendentes: <strong>1</strong></li>
                    <li>Maior incidência: <strong>Obra Civil</strong> (5 ocorrências)</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Seção de Introdução - Melhorada -->
          <div class="section-container">
            <h2 class="section-title"><i class="fas fa-info-circle"></i> Introdução</h2>
            <div class="introduction-text">
              <p>Este dossier de qualidade apresenta toda a documentação relativa ao sistema de gestão da qualidade implementado na empreitada 4001008 - "Nuevas Plantas de Poliolefinas, Plataformas Logísticas Y Offsites".</p>
              <p>O dossier está estruturado de forma a facilitar a consulta e verificação de todos os registos e documentos que atestam a conformidade da obra com os requisitos contratuais, normativos e legais aplicáveis.</p>
              <p>Este documento digital representa a versão mais atual e completa do dossier, permitindo acesso rápido e eficiente a toda a documentação do projeto e facilitando a colaboração entre todas as partes interessadas.</p>
            </div>
          </div>

          <!-- Estatísticas do Dossier - Melhoradas -->
          <div class="section-container">
            <h2 class="section-title"><i class="fas fa-file-alt"></i> Estatísticas do Dossier</h2>
            <div class="dashboard-cards">
              <div class="dashboard-card">
                <div class="card-label"><i class="fas fa-file-pdf"></i> Total de Documentos</div>
                <div class="card-value">178</div>
              </div>
              <div class="dashboard-card">
                <div class="card-label"><i class="fas fa-check-circle"></i> Aprovados</div>
                <div class="card-value">165</div>
              </div>
              <div class="dashboard-card">
                <div class="card-label"><i class="fas fa-sync"></i> Em Revisão</div>
                <div class="card-value">13</div>
              </div>
              <div class="dashboard-card">
                <div class="card-label"><i class="fas fa-clock"></i> Pendentes</div>
                <div class="card-value">0</div>
              </div>
              <div class="dashboard-card">
                <div class="card-label"><i class="fas fa-exclamation-triangle"></i> Não Conformidades</div>
                <div class="card-value">20</div>
              </div>
              <div class="dashboard-card">
                <div class="card-label"><i class="fas fa-clipboard-check"></i> Ações Corretivas</div>
                <div class="card-value">20</div>
              </div>
            </div>
          </div>

          <!-- Equipe Responsável - Melhorada -->
          <div class="section-container">
            <h2 class="section-title"><i class="fas fa-users"></i> Equipa Responsável</h2>
            <div class="team-grid">
              <div class="team-member">
                <div class="member-position">ELABORADO</div>
                <div class="member-role">QUALIDADE</div>
                <div class="member-name">José Antunes</div>
                <div class="member-contact">jantunes@aschinfraestructuras.com</div>
              </div>
              <div class="team-member">
                <div class="member-position">VERIFICADO</div>
                <div class="member-role">DIRECTOR TÉCNICO</div>
                <div class="member-name">Mário Cristiano</div>
                <div class="member-contact">mcristiano@achportugal.pt</div>
              </div>
              <div class="team-member">
                <div class="member-position">APROVADO</div>
                <div class="member-role">DIRECTOR DE OBRA</div>
                <div class="member-name">Luis Salvado</div>
                <div class="member-contact">lsalvado@achportugal.pt</div>
              </div>
              <div class="team-member">
                <div class="member-position">DELEGADO</div>
                <div class="member-role">ASCH Infraestructuras</div>
                <div class="member-name">Gustavo Martínez</div>
                <div class="member-contact">gmartinez@aschinfraestructuras.com</div>
              </div>
            </div>

            <!-- Botões de Ação - Melhorados -->
            <div class="action-buttons">
              <button class="btn btn-primary" onclick="loadPdf('PQ.pdf', '1.1 – Plano da Qualidade (PQ)')">
                <i class="fas fa-file-pdf"></i> Ver Plano da Qualidade
              </button>
             <a href="PQ.pdf" download="Plano_da_Qualidade_Projeto_Alba.pdf" class="btn btn-outlined" onclick="downloadDocument('PQ.pdf', 'Plano_da_Qualidade_Projeto_Alba.pdf')">
                <i class="fas fa-download"></i> Download Plano da Qualidade
             </a>

               <a href="dossier_final.pdf" download="Dossier_Final_Qualidade_Projeto_Alba.pdf" class="btn btn-success" onclick="downloadFullDossier()">
                <i class="fas fa-file-archive"></i> Download Dossier Completo
              </a>
              <button class="btn btn-info" onclick="showRevisionsModal()">
                <i class="fas fa-history"></i> Histórico de Revisões
              </button>
            </div>
          </div>
          
            <!-- Certificação Final de Obra -->
<div class="section-container certificate-container">
  <div class="certificate-header">
    <img src="assets/images/logoasch.png" alt="Logo ASCH" class="certificate-logo">
    <h2 class="certificate-title">Declaração de Conclusão de Obra</h2>
    <img src="assets/images/logorepsol.jpg" alt="Logo Repsol" class="certificate-logo">
  </div>
  
  <div class="certificate-content">
    <p class="certificate-intro">
      A <strong>ASCH INFRAESTRUCTURAS Y SERVICIOS S.A.</strong>, na qualidade de empreiteiro responsável, 
      declara que a obra:
    </p>
    
    <div class="certificate-project-details">
      <h3>"Proyecto Alba – Nuevas Plantas de Poliolefinas, Plataformas Logísticas y Offsites"</h3>
      <p>Número de Referência: <strong>4001008</strong></p>
      <p>Cliente: <strong>Repsol Polímeros S.A.</strong></p>
    </div>
    
    <p class="certificate-statement">
      Foi concluída em <strong>31 de março de 2025</strong>, cumprindo todos os requisitos 
      contratuais, normativos e legais aplicáveis, sendo entregue em conformidade com as 
      especificações técnicas acordadas.
    </p>
    
    <p class="certificate-validation">
      Este documento faz parte integrante do Dossier Final da Qualidade, onde constam 
      todos os registos que atestam a conformidade da execução.
    </p>
    
    <div class="certificate-signatures">
      <div class="certificate-signature">
        <img src="assets/images/signature.png" alt="Assinatura Director de Obra" class="signature-image">
        <div class="signature-line"></div>
        <div class="signature-name">Luis Salvado</div>
        <div class="signature-role">Director de Obra</div>
      </div>
      
      <div class="certificate-seal">
        <div class="seal-image">
          <i class="fas fa-certificate"></i>
        </div>
        <div class="seal-text">Certificado Digital</div>
        <div class="seal-date">31/03/2025</div>
      </div>
    </div>
  </div>
  
  <div class="certificate-footer">
    <div class="certificate-qr">
      <img src="assets/images/verification-qr.png" alt="QR Code de Verificação" width="100">
    </div>
    <div class="certificate-verification">
      <div class="verification-title">Verificação de Autenticidade</div>
      <div class="verification-code">ASCH-QD-4001008-2025-V1</div>
      <div class="verification-hash">SHA256:4c21b9e8a1fe06c9a03235438a48db8c346a8c69b6b90e17c1543544647c0429</div>
    </div>
  </div>
</div>
          <!-- Validação e Autenticidade - Melhoradas -->
          <div class="section-container">
            <h2 class="section-title"><i class="fas fa-certificate"></i> Validação e Autenticidade</h2>
            
            <!-- Cards de validação dos capítulos principais -->
<div class="dashboard-cards" style="margin-bottom: 2rem;">
  <!-- Capítulo 1 -->
  <div class="dashboard-card">
    <div class="card-label"><i class="fas fa-tasks"></i> Sistema de Gestão da Qualidade</div>
    <div class="card-value" style="color: #28a745">
      <i class="fas fa-check-circle"></i> Validado
    </div>
    <div style="margin-top: 0.5rem; font-size: 0.85rem;">
      <div>Aprovado por: Luis Salvado</div>
      <div>Data: 15/03/2025</div>
    </div>
  </div>
  
  <!-- Capítulo 2 -->
  <div class="dashboard-card">
    <div class="card-label"><i class="fas fa-hard-hat"></i> Execução do Projeto</div>
    <div class="card-value" style="color: #ffc107">
      <i class="fas fa-exclamation-circle"></i> Pendente
    </div>
    <div style="margin-top: 0.5rem; font-size: 0.85rem;">
      <div>Verificado por: Mário Cristiano</div>
      <div>Data: 22/03/2025</div>
    </div>
  </div>
  
  <!-- Capítulo 3 -->
  <div class="dashboard-card">
    <div class="card-label"><i class="fas fa-drafting-compass"></i> Documentos de Engenharia</div>
    <div class="card-value" style="color: #28a745">
      <i class="fas fa-check-circle"></i> Validado
    </div>
    <div style="margin-top: 0.5rem; font-size: 0.85rem;">
      <div>Aprovado por: Luis Salvado</div>
      <div>Data: 20/03/2025</div>
    </div>
  </div>
  
  <!-- Capítulo 4 -->
  <div class="dashboard-card">
    <div class="card-label"><i class="fas fa-file-alt"></i> Documentação Adicional</div>
    <div class="card-value" style="color: #28a745">
      <i class="fas fa-check-circle"></i> Validado
    </div>
    <div style="margin-top: 0.5rem; font-size: 0.85rem;">
      <div>Aprovado por: Luis Salvado</div>
      <div>Data: 25/03/2025</div>
    </div>
  </div>
</div>
            <div class="digital-signature">
              <div class="signature-info">
                <p>Este dossier digital de qualidade está certificado pela ASCH INFRAESTRUCTURAS Y SERVICIOS S.A. e tem validade legal.</p>
                <p>Código de Verificação: <strong>ASCH-QD-4001008-2025-V1</strong></p>
                <p>Documento assinado digitalmente em: <span id="signature-date">31/03/2025</span></p>
              </div>
              <div class="signature-block">
                <img src="assets/images/signature.png" alt="Assinatura Digital" class="signature-image">
                <div class="signature-details">
                  <p class="signature-name">Luis Salvado</p>
                  <p class="signature-role">Director de Obra</p>
                  <p class="signature-company">ASCH INFRAESTRUCTURAS Y SERVICIOS S.A.</p>
                </div>
                <div class="signature-seal">
                  <i class="fas fa-shield-alt"></i>
                  <span>Documento verificado e certificado</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Visualizador de PDF - Melhorado -->
        <div class="pdf-viewer" id="pdf-viewer">
          <div class="pdf-header">
            <div

  class="pdf-title" id="pdf-title">Documento</div>
            <div class="pdf-meta">
              <span id="pdf-meta-date">Data: 31/03/2025</span>
              <span id="pdf-meta-revision">Revisão: Rev.000</span>
            </div>
          </div>
          
          <!-- Ações do PDF - Melhoradas -->
          <div class="pdf-actions">
            <button class="btn-control" onclick="showToast('Comentário adicionado com sucesso!', 'success')">
              <i class="fas fa-comment"></i> Adicionar Comentário
            </button>
            <button class="btn-control" onclick="showToast('Documento marcado para revisão', 'success')">
              <i class="fas fa-pencil-alt"></i> Editar
            </button>
            <button class="btn-control" onclick="sharePdf()">
              <i class="fas fa-share-alt"></i> Partilhar
            </button>
            <button class="btn-control" onclick="downloadCurrentPdf()">
              <i class="fas fa-download"></i> Download
            </button>
          </div>

          <!-- Container do PDF - Melhorado -->
          <div class="pdf-container">
            <div class="loading-indicator hidden" id="pdf-loading">
              <div class="spinner"></div>
              <p class="loading-text">A carregar documento...</p>
            </div>
            <canvas id="pdf-canvas"></canvas>
          </div>

          <!-- Controles do PDF - Melhorados -->
          <div class="pdf-controls">
            <div class="pdf-navigation">
              <button class="btn-control" id="prev">
                <i class="fas fa-chevron-left"></i> Anterior
              </button>
              <div class="page-info">Página <span id="page-num">0</span> de <span id="page-count">0</span></div>
              <button class="btn-control" id="next">
                Próxima <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="pdf-zoom">
              <button class="btn-control" id="zoom-out">
                <i class="fas fa-search-minus"></i>
              </button>
              <div class="zoom-level" id="zoom-level">100%</div>
              <button class="btn-control" id="zoom-in">
                <i class="fas fa-search-plus"></i>
              </button>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Rodapé - Melhorado -->
    <footer class="footer">
      <div class="footer-content">
        <img src="assets/images/logoasch.png" alt="Logo ASCH" class="footer-logo">
        <div class="footer-text">
          <p>&copy; 2025 ASCH INFRAESTRUCTURAS Y SERVICIOS S.A. - Todos os direitos reservados</p>
          <p>Dossier de Qualidade - Projeto 4001008 - Rev.000</p>
        </div>
        <div class="footer-links">
          <a href="#" class="footer-link" onclick="showToast('Redirecionando para política de privacidade', 'success')">Política de Privacidade</a>
          <a href="#" class="footer-link" onclick="showToast('Redirecionando para termos de uso', 'success')">Termos de Uso</a>
          <a href="#" class="footer-link" onclick="showFeedbackForm()">Feedback</a>
      <div class="footer-validation">
      <div class="validation-hash">
        <span>Hash de Verificação: </span>
        <code>SHA256:4c21b9e8a1fe06c9a03235438a48db8c346a8c69b6b90e17c1543544647c0429</code>
     </div>
     <div class="qr-code">
      <img src="assets/images/verification-qr.png" alt="QR Code de Verificação" width="80">
      <div class="qr-text">Verificação Digital</div>
  </div>
</div>
    </footer>
  </div>

  <!-- Modal de Resultados da Pesquisa - Melhorado -->
  <div class="search-modal" id="search-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Resultados da Pesquisa: <span id="search-term"></span></h3>
        <button class="close-modal" onclick="closeSearchModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="search-results" id="search-results">
        <!-- Search results will be populated here -->
      </div>
    </div>
  </div>
  
  <!-- Formulário de Feedback - Melhorado -->
  <div class="feedback-overlay" id="feedback-overlay">
    <div class="feedback-form">
      <h3 class="feedback-title">Enviar Feedback</h3>
      <p>Ajude-nos a melhorar o dossier de qualidade partilhando a sua opinião.</p>
      <input type="text" class="feedback-input" placeholder="Assunto" />
      <textarea class="feedback-input" rows="5" placeholder="Descreva o seu feedback, sugestão ou problema encontrado..."></textarea>
      <div class="feedback-actions">
        <button class="btn btn-outlined" onclick="closeFeedbackForm()">Cancelar</button>
        <button class="btn btn-primary" onclick="submitFeedback()">Enviar</button>
      </div>
    </div>
  </div>
  
  <!-- Modal de Histórico de Revisões - Melhorado -->
  <div class="search-modal" id="revisions-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Histórico de Revisões do Dossier</h3>
        <button class="close-modal" onclick="closeRevisionsModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="search-results">
        <div class="result-item">
          <div class="result-title">Revisão 000 - Versão Final</div>
          <div class="result-snippet">Emissão final do dossier de qualidade conforme aprovação cliente.</div>
          <div class="result-meta">31/03/2025 • José Antunes</div>
        </div>
        <div class="result-item">
          <div class="result-title">Revisão A - Versão para Revisão Interna</div>
          <div class="result-snippet">Versão preliminar para revisão interna antes da aprovação cliente.</div>
          <div class="result-meta">15/03/2025 • José Antunes</div>
        </div>
        <div class="result-item">
          <div class="result-title">Preparação de Template</div>
          <div class="result-snippet">Estruturação inicial do dossier e definição de template.</div>
          <div class="result-meta">10/02/2025 • Equipa da Qualidade</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Atalhos de Teclado - Novo componente -->
  <div class="keyboard-shortcuts" id="keyboard-shortcuts">
    <div class="shortcuts-title">
      Atalhos de Teclado
      <button onclick="toggleShortcuts()"><i class="fas fa-times"></i></button>
    </div>
    <ul class="shortcut-list">
      <li class="shortcut-item">
        <span>Página anterior</span>
        <span class="shortcut-key">←</span>
      </li>
      <li class="shortcut-item">
        <span>Próxima página</span>
        <span class="shortcut-key">→</span>
      </li>
      <li class="shortcut-item">
        <span>Aumentar zoom</span>
        <span class="shortcut-key">+</span>
      </li>
      <li class="shortcut-item">
        <span>Diminuir zoom</span>
        <span class="shortcut-key">-</span>
      </li>
      <li class="shortcut-item">
        <span>Voltar ao início</span>
        <span class="shortcut-key">Home</span>
      </li>
      <li class="shortcut-item">
        <span>Pesquisar</span>
        <span class="shortcut-key">Ctrl+F</span>
      </li>
    </ul>
  </div>
  
  <style>
  /* Melhorias no botão para garantir que apareça em todas as visualizações */
  .back-to-home {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background-color: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    z-index: 2000; /* Valor muito alto para garantir que fique acima de tudo */
    transition: all 0.3s ease;
  }
  
  .back-to-home:hover {
    background-color: var(--primary-dark);
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.3);
  }
  
  .back-to-home i {
    font-size: 1.5rem;
  }
</style>

<!-- Botão para voltar à página inicial - versão melhorada -->
<script>
  // Adicionar função específica para o botão
  function handleHomeButton() {
    // Se estiver na visualização de PDF, volta para o conteúdo principal
    if (document.getElementById('pdf-viewer').style.display === 'block' || 
        document.getElementById('pdf-viewer').classList.contains('active')) {
      showWelcomeContent();
    } 
    // Se estiver na splash screen, entra no dossier
    else if (document.getElementById('splash-screen').style.display !== 'none') {
      enterDossier();
    }
    // Se já estiver no conteúdo principal, não faz nada ou pode rolar para o topo
    else {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }
</script>
 
  <!-- JavaScript - Melhorado -->
  <script>
    // Variáveis para o visualizador de PDF
    let pdfDoc = null;
    let pageNum = 1;
    let pageRendering = false;
    let pageNumPending = null;
    let scale = 1.5;
    let zoomLevel = 100;
    let canvas = document.getElementById('pdf-canvas');
    let ctx = canvas.getContext('2d');
    let currentPdfPath = '';
    let currentPdfTitle = '';

    // Variáveis para os gráficos
    let progressChart = null;
    let nonconformitiesChart = null;

    // Evento quando o DOM estiver carregado
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar data no splash screen
      initializeSplashDate();
      
      // Ativar a primeira categoria por padrão
      document.querySelector('.nav-category').classList.add('active');
      
      // Adicionar eventos aos botões de navegação do PDF
      document.getElementById('prev').addEventListener('click', prevPage);
      document.getElementById('next').addEventListener('click', nextPage);
      document.getElementById('zoom-in').addEventListener('click', zoomIn);
      document.getElementById('zoom-out').addEventListener('click', zoomOut);
      
      // Ativar o dark mode toggle
      document.getElementById('dark-mode-toggle').addEventListener('click', toggleDarkMode);
      
      // Permitir pesquisa ao pressionar Enter
      document.getElementById('global-search').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          performSearch();
          e.preventDefault();
        }
      });
      
      // Adaptar o visualizador em dispositivos móveis
      if (window.innerWidth < 768) {
        scale = 1.0;
        zoomLevel = 67;
        document.getElementById('zoom-level').textContent = '67%';
      }
      
      // Mostrar/ocultar o botão "Voltar ao início" ao rolar
      window.addEventListener('scroll', function() {
        const backToHomeBtn = document.getElementById('back-to-home');
        if (window.scrollY > 300) {
          backToHomeBtn.classList.add('visible');
        } else {
          backToHomeBtn.classList.remove('visible');
        }
      });
      
      // Adicionar listener para atalhos de teclado globais
      document.addEventListener('keydown', function(e) {
        handleKeyboardShortcuts(e);
      });
    });

    // Função para inicializar data no splash screen
    function initializeSplashDate() {
      document.getElementById('splash-date').textContent = 'Última atualização: 31 de março de 2025';
      document.getElementById('signature-date').textContent = '31/03/2025';
    }

    // Função para entrar no dossier - Melhorada
    function enterDossier() {
      const splashScreen = document.getElementById('splash-screen');
      const appContainer = document.getElementById('app-container');
      
      // Animar a transição
      splashScreen.classList.add('fade-out');
      
      // Mostrar o conteúdo principal após a animação
      setTimeout(() => {
        splashScreen.style.display = 'none';
        appContainer.classList.add('visible');
        
        // Inicializar os gráficos após o dossier ser exibido
        initializeProgressChart();
        initializeNonconformitiesChart();
        
        // Mostrar dica de atalhos após alguns segundos
        setTimeout(() => {
          document.getElementById('keyboard-shortcuts').classList.add('visible');
        }, 5000);
      }, 500);
    }

    // Função para alternar o menu lateral em dispositivos móveis
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    // Função para alternar o modo escuro
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      const icon = document.getElementById('dark-mode-toggle').querySelector('i');
      
      if (document.body.classList.contains('dark-mode')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
        showToast('Modo escuro ativado', 'success');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
        showToast('Modo claro ativado', 'success');
      }
    }

    // Função para mostrar/esconder os atalhos de teclado
    function toggleShortcuts() {
      document.getElementById('keyboard-shortcuts').classList.toggle('visible');
    }

    // Função para alternar as categorias do menu
    function toggleCategory(category) {
      category.classList.toggle('active');
    }

    // Função para controlar os subcapítulos
    function toggleSubcategory(subcategory) {
      subcategory.classList.toggle('active');
      event.stopPropagation(); // Impedir que o clique propague para o pai
    }

    // Função para controlar o terceiro nível
    function toggleThirdLevel(item) {
      item.classList.toggle('active');
      event.stopPropagation(); // Impedir que o clique propague para o pai
    }

    // Função para filtrar os capítulos na busca
    function filterChapters() {
      const query = document.getElementById('chapter-search').value.toLowerCase();
      
      // Filtrar categorias principais
      document.querySelectorAll('.nav-category').forEach(category => {
        const categoryText = category.innerText.toLowerCase();
        const match = categoryText.includes(query);
        category.style.display = match ? 'block' : 'none';
      });
      
      // Expandir categorias que contenham o termo de pesquisa
      if (query.length > 2) {
        document.querySelectorAll('.nav-category').forEach(category => {
          const categoryText = category.innerText.toLowerCase();
          if (categoryText.includes(query)) {
            category.classList.add('active');
            
            // Expandir subcategorias relevantes
            category.querySelectorAll('.nav-subcategory').forEach(subcategory => {
              const subcategoryText = subcategory.innerText.toLowerCase();
              if (subcategoryText.includes(query)) {
                subcategory.classList.add('active');
              }
            });
          }
        });
      }
    }

    // Função para mostrar o conteúdo de boas-vindas
    function showWelcomeContent() {
      document.getElementById('welcome-content').style.display = 'block';
      document.getElementById('pdf-viewer').classList.remove('active');
      document.getElementById('current-section').textContent = 'Visão Geral';
      
      // Esconder a barra lateral em dispositivos móveis
      if (window.innerWidth < 768) {
        document.getElementById('sidebar').classList.remove('active');
      }
    }

    // Função para carregar um PDF - Corrigida para buscar na raiz
function loadPdf(pdfPath, title) {
  // Armazenar o caminho e título para uso posterior
  currentPdfPath = pdfPath;
  currentPdfTitle = title || 'Documento';
  
  // Mostrar o visualizador de PDF
  document.getElementById('welcome-content').style.display = 'none';
  document.getElementById('pdf-viewer').classList.add('active');
  document.getElementById('pdf-title').textContent = title || 'Documento';
  document.getElementById('current-section').textContent = title || 'Documento';
  
  // Esconder a barra lateral em dispositivos móveis
  if (window.innerWidth < 768) {
    document.getElementById('sidebar').classList.remove('active');
  }
  
  // Resetar estado
  if (pdfDoc) {
    pdfDoc = null;
    pageNum = 1;
    scale = 1.5;
    zoomLevel = 100;
    document.getElementById('zoom-level').textContent = '100%';
  }
  
  // Mostrar indicador de carregamento
  document.getElementById('pdf-loading').classList.remove('hidden');
  
  // Carregar o PDF diretamente da raiz (sem prefixo de pasta)
  pdfjsLib.getDocument(pdfPath).promise
    .then(function(pdfDoc_) {
      // PDF carregado
      pdfDoc = pdfDoc_;
      
      // Atualizar contagem de páginas
      document.getElementById('page-count').textContent = pdfDoc.numPages;
      document.getElementById('page-num').textContent = pageNum;
      
      // Esconder indicador de carregamento
      document.getElementById('pdf-loading').classList.add('hidden');
      
      // Renderizar primeira página
      renderPage(pageNum);
      
      // Atualizar metadados do documento
      document.getElementById('pdf-meta-date').textContent = 'Data: 31/03/2025';
      document.getElementById('pdf-meta-revision').textContent = 'Revisão: Rev.000';
      
      // Mostrar toast de documento carregado
      showToast(`Documento "${title}" carregado com sucesso!`, 'success');
      document.getElementById('back-to-home').classList.add('visible');
    })
    .catch(function(error) {
      console.error('Erro ao carregar o PDF:', error);
      document.getElementById('pdf-loading').classList.add('hidden');
      
      // Mostrar mensagem de erro
      const errorDiv = document.createElement('div');
      errorDiv.style.padding = '2rem';
      errorDiv.style.textAlign = 'center';
      errorDiv.style.color = '#dc3545';
      errorDiv.innerHTML = '<i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i><p>Não foi possível carregar o documento PDF. Por favor, tente novamente mais tarde.</p>';
      document.querySelector('.pdf-container').appendChild(errorDiv);
      
      // Atualizar elementos de navegação
      document.getElementById('page-count').textContent = '0';
      document.getElementById('page-num').textContent = '0';
      
      // Mostrar toast de erro
      showToast('Erro ao carregar o documento. Tente novamente.', 'error');
    });
}

    // Função para adicionar à lista de documentos visualizados recentemente
    function addToRecentlyViewed(pdfPath, title) {
      // Em uma implementação real, isto poderia armazenar no localStorage 
      // ou enviar para o servidor para histórico de usuário
      console.log('Documento adicionado aos recentes:', pdfPath, title);
    }

    // Função para renderizar uma página do PDF
    function renderPage(num) {
      pageRendering = true;
      
      // Buscar a página
      pdfDoc.getPage(num).then(function(page) {
        // Ajustar canvas para dimensões da página
        const viewport = page.getViewport({ scale });
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        
        // Renderizar a página no canvas
        const renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };
        
        const renderTask = page.render(renderContext);
        
        // Aguardar a renderização
        renderTask.promise.then(function() {
          pageRendering = false;
          
          if (pageNumPending !== null) {
            // Nova renderização pendente
            renderPage(pageNumPending);
            pageNumPending = null;
          }
        });
      });
      
      // Atualizar número da página atual
      document.getElementById('page-num').textContent = num;
    }

    // Função para enfileirar renderização para evitar concorrência
    function queueRenderPage(num) {
      if (pageRendering) {
        pageNumPending = num;
      } else {
        renderPage(num);
      }
    }

    // Função para ir para página anterior
    function prevPage() {
      if (pageNum <= 1 || !pdfDoc) {
        return;
      }
      pageNum--;
      queueRenderPage(pageNum);
    }

    // Função para ir para próxima página
    function nextPage() {
      if (!pdfDoc || pageNum >= pdfDoc.numPages) {
        return;
      }
      pageNum++;
      queueRenderPage(pageNum);
    }

    // Função para aumentar zoom
    function zoomIn() {
      if (zoomLevel >= 200) return;
      
      zoomLevel += 25;
      scale += 0.25;
      document.getElementById('zoom-level').textContent = zoomLevel + '%';
      queueRenderPage(pageNum);
    }

    // Função para diminuir zoom
    function zoomOut() {
      if (zoomLevel <= 50) return;
      
      zoomLevel -= 25;
      scale -= 0.25;
      document.getElementById('zoom-level').textContent = zoomLevel + '%';
      queueRenderPage(pageNum);
    }

    // Função para abrir o primeiro PDF (Plano da Qualidade)
    function openFirstPdf() {
      loadPdf('PQ.pdf', '1.1 – Plano da Qualidade (PQ)');
    }

 // Função para baixar o PDF atual
function downloadCurrentPdf() {
  if (!currentPdfPath) {
    showToast('Nenhum documento aberto para download.', 'warning');
    return;
  }
  
  // Criar nome de arquivo para download baseado no título
  const fileName = currentPdfTitle.replace(/[^\w\s]/gi, '_') + '.pdf';
  
  // Iniciar download diretamente da raiz
  const downloadLink = document.createElement('a');
  downloadLink.href = currentPdfPath;
  downloadLink.download = fileName;
  document.body.appendChild(downloadLink);
  downloadLink.click();
  document.body.removeChild(downloadLink);
  
  showToast(`Download iniciado: ${fileName}`, 'success');
}

// Função para baixar um documento específico
function downloadDocument(pdfPath, suggestedName) {
  const downloadLink = document.createElement('a');
  downloadLink.href = pdfPath;
  downloadLink.download = suggestedName || pdfPath;
  document.body.appendChild(downloadLink);
  downloadLink.click();
  document.body.removeChild(downloadLink);
  
  showToast(`Download iniciado: ${suggestedName || pdfPath}`, 'success');
  return false; // Prevenir navegação padrão
}

    // Função para baixar o dossier completo
function downloadFullDossier() {
  const downloadLink = document.createElement('a');
  downloadLink.href = 'dossier_final.pdf';
  downloadLink.download = 'Dossier_Final_Qualidade_Projeto_Alba.pdf';
  document.body.appendChild(downloadLink);
  downloadLink.click();
  document.body.removeChild(downloadLink);
  
  showToast('Download do Dossier Completo iniciado!', 'success');
  return false; // Prevenir navegação padrão
}

    // Função para compartilhar o PDF atual
    function sharePdf() {
      if (!currentPdfPath) {
        showToast('Nenhum documento aberto para partilhar.', 'warning');
        return;
      }
      
      // Em uma implementação real, isto poderia abrir um modal de compartilhamento
      // ou usar a Web Share API se disponível
      if (navigator.share) {
        navigator.share({
          title: currentPdfTitle,
          text: 'Confira este documento do Dossier de Qualidade do Projeto Alba',
          url: window.location.href
        })
        .then(() => showToast('Documento partilhado com sucesso!', 'success'))
        .catch((error) => console.log('Erro ao partilhar:', error));
      } else {
        // Fallback para copiar URL para área de transferência
        const dummyTextArea = document.createElement('textarea');
        dummyTextArea.value = window.location.href;
        document.body.appendChild(dummyTextArea);
        dummyTextArea.select();
        document.execCommand('copy');
        document.body.removeChild(dummyTextArea);
        
        showToast('Link copiado para a área de transferência!', 'success');
      }
    }

    // Função para fechar o modal de pesquisa
    function closeSearchModal() {
      document.getElementById('search-modal').classList.remove('active');
    }

    // Função para mostrar o modal de revisões
    function showRevisionsModal() {
      document.getElementById('revisions-modal').classList.add('active');
    }

    // Função para fechar o modal de revisões
    function closeRevisionsModal() {
      document.getElementById('revisions-modal').classList.remove('active');
    }

    // Função para mostrar o formulário de feedback
    function showFeedbackForm() {
      document.getElementById('feedback-overlay').classList.add('active');
    }

    // Função para fechar o formulário de feedback
    function closeFeedbackForm() {
      document.getElementById('feedback-overlay').classList.remove('active');
    }

    // Função para enviar feedback
    function submitFeedback() {
      const subject = document.querySelector('.feedback-form input').value.trim();
      const message = document.querySelector('.feedback-form textarea').value.trim();
      
      if (!subject || !message) {
        showToast('Por favor, preencha todos os campos.', 'warning');
        return;
      }
      
      // Em uma implementação real, isto enviaria para um servidor
      // Simulação de envio
      showToast('Feedback enviado com sucesso! Obrigado pela sua contribuição.', 'success');
      closeFeedbackForm();
      
      // Limpar formulário
      document.querySelector('.feedback-form input').value = '';
      document.querySelector('.feedback-form textarea').value = '';
    }

    // Função para mostrar toast de notificação - Melhorada
    function showToast(message, type = 'success') {
      const toastContainer = document.getElementById('toast-container');
      
      // Criar toast
      const toast = document.createElement('div');
      toast.className = `toast toast-${type}`;
      
      // Selecionar ícone baseado no tipo
      let icon;
      switch (type) {
        case 'success':
          icon = 'fa-check-circle';
          break;
        case 'warning':
          icon = 'fa-exclamation-triangle';
          break;
        case 'error':
          icon = 'fa-times-circle';
          break;
        default:
          icon = 'fa-info-circle';
      }
      
      // Adicionar conteúdo
      toast.innerHTML = `
        <div class="toast-content">
          <div class="toast-icon"><i class="fas ${icon}"></i></div>
          <div class="toast-message">${message}</div>
        </div>
        <button class="close-toast" onclick="this.parentElement.remove()">
          <i class="fas fa-times"></i>
        </button>
      `;
      
      // Adicionar ao container
      toastContainer.appendChild(toast);
      
      // Animar entrada
      setTimeout(() => {
        toast.classList.add('active');
      }, 10);
      
      // Auto remover após 5 segundos
      setTimeout(() => {
        toast.classList.remove('active');
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 5000);
    }

    // Função para realizar pesquisa - Melhorada para realmente buscar por documentos
    function performSearch() {
      const searchTerm = document.getElementById('global-search').value.trim();
      
      if (searchTerm.length < 3) {
        showToast('Por favor, informe pelo menos 3 caracteres para pesquisar.', 'warning');
        return false;
      }
      
      document.getElementById('search-term').textContent = searchTerm;
      document.getElementById('search-modal').classList.add('active');
      
      const searchResults = document.getElementById('search-results');
      searchResults.innerHTML = '<div class="loading-indicator" style="padding: 2rem;"><div class="spinner"></div><p>Pesquisando documentos...</p></div>';
      
      // Simular tempo de carregamento
      setTimeout(() => {
        // Buscar em todo o dossier pelo termo (simulado)
        searchDossier(searchTerm).then(results => {
          if (results.length === 0) {
            searchResults.innerHTML = `
              <div style="text-align: center; padding: 2rem;">
                <i class="fas fa-search" style="font-size: 2rem; color: var(--gray); margin-bottom: 1rem;"></i>
                <p>Nenhum resultado encontrado para "${searchTerm}".</p>
                <p style="font-size: 0.9rem; color: var(--gray); margin-top: 1rem;">Tente outros termos ou verifique a ortografia.</p>
              </div>
            `;
          } else {
            // Limpar resultados anteriores
            searchResults.innerHTML = '';
            
            // Adicionar cada resultado
            results.forEach(result => {
              const resultItem = document.createElement('div');
              resultItem.className = 'result-item';
              resultItem.onclick = () => loadPdf(result.file, result.title);
              
              // Destacar o termo de pesquisa no snippet
              const highlightedSnippet = result.snippet.replace(
                new RegExp(searchTerm, 'gi'),
                match => `<span class="highlight">${match}</span>`
              );
              
              resultItem.innerHTML = `
                <div class="result-title">${result.title}</div>
                <div class="result-snippet">${highlightedSnippet}</div>
                <div class="result-meta">${result.section} • ${result.revision} • ${result.date} • ${result.occurrences} ocorrências</div>
              `;
              
              searchResults.appendChild(resultItem);
            });
          }
          });
      }, 1500);
      
      return false; // Prevenir submit do form
    }

    // Função simulada para buscar no dossier
    async function searchDossier(term) {
      // Em uma implementação real, isto consultaria um índice ou banco de dados
      // Retornando resultados simulados para demonstração
      return [
        {
          title: "1.1 – Plano da Qualidade (PQ)",
          snippet: "...sistema de gestão da qualidade implementado na empreitada 4001008...",
          section: "Capítulo 1",
          revision: "Rev.000",
          date: "15/02/2025",
          occurrences: 15,
          file: "PQ.pdf"
        },
        {
          title: "1.3 – Certificados de Calibração",
          snippet: "...instrumentos calibrados conforme o plano de qualidade do projeto...",
          section: "Capítulo 1",
          revision: "Rev.001",
          date: "10/03/2025",
          occurrences: 8,
          file: "CC.pdf"
        },
        {
          title: "2.1.2 – Estruturas",
          snippet: "...requisitos de qualidade aplicáveis às estruturas de betão...",
          section: "Capítulo 2",
          revision: "Rev.000",
          date: "05/03/2025",
          occurrences: 5,
          file: "ES.pdf"
        },
        {
          title: "1.6 – Não Conformidades",
          snippet: "...indicadores de desempenho da qualidade demonstram conformidade...",
          section: "Capítulo 1",
          revision: "Rev.000",
          date: "18/03/2025",
          occurrences: 12,
          file: "NC.pdf"
        }
      ];
    }

    // Função para inicializar o gráfico de progresso - Melhorada
    function initializeProgressChart() {
      // Se já existe um gráfico, destruir antes de criar novo
      if (progressChart) {
        progressChart.destroy();
      }
      
      // Dados atualizados para o gráfico (até 31/03/2025)
      const data = {
        labels: ['Jun 23', 'Jul 23', 'Ago 23', 'Set 23', 'Out 23', 'Nov 23', 'Dez 23', 
                'Jan 24', 'Fev 24', 'Mar 24', 'Abr 24', 'Mai 24', 'Jun 24', 
                'Jul 24', 'Ago 24', 'Set 24', 'Out 24', 'Nov 24', 'Dez 24',
                'Jan 25', 'Fev 25', 'Mar 25'],
        datasets: [
          {
            label: 'Progresso Planeado (%)',
            data: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 80, 100, 100, 100, 100, 100, 100],
            borderColor: 'rgba(0, 86, 179, 0.7)',
            backgroundColor: 'rgba(0, 86, 179, 0.1)',
            borderWidth: 2,
            tension: 0.3,
            fill: true
          },
          {
            label: 'Progresso Real (%)',
            data: [1, 3, 7, 10, 13, 16, 19, 24, 29, 36, 44, 52, 65, 71, 76, 84, 89, 93, 96, 98, 100],
            borderColor: 'rgba(40, 167, 69, 0.7)',
            backgroundColor: 'rgba(40, 167, 69, 0.1)',
            borderWidth: 2,
            tension: 0.3,
            fill: true
          }
        ]
      };
      
      // Configuração do gráfico
      const config = {
        type: 'line',
        data: data,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Evolução do Progresso de Obra (Junho 2023 - Março 2025)',
              font: {
                size: 16,
                weight: 'bold'
              }
            },
            legend: {
              position: 'top',
            },
            tooltip: {
              mode: 'index',
              intersect: false,
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ': ' + context.parsed.y + '%';
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              title: {
                display: true,
                text: 'Percentagem de Conclusão (%)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Mês (2023-2025)'
              },
              ticks: {
                maxRotation: 45,
                minRotation: 45
              }
            }
          }
        }
      };
      
      // Criar o gráfico
      const ctx = document.getElementById('progress-chart').getContext('2d');
      progressChart = new Chart(ctx, config);
    }

    // Função para inicializar o gráfico de não conformidades - Corrigido para mostrar 20 NCs
    function initializeNonconformitiesChart() {
      const ctx = document.getElementById('nonconformities-chart').getContext('2d');
      
      const nonconformitiesChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Movim.Terras', 'Estruturas', 'Materiais', 'Drenagem', 'Projeto', 'Piping'],
          datasets: [{
            label: 'Não Conformidades por Área',
            data: [4, 10, 2, 2, 1, 1],
            backgroundColor: [
              'rgba(255, 99, 132, 0.7)',
              'rgba(54, 162, 235, 0.7)',
              'rgba(255, 206, 86, 0.7)',
              'rgba(75, 192, 192, 0.7)',
              'rgba(153, 102, 255, 0.7)',
              'rgba(255, 159, 64, 0.7)'
            ],
            borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Distribuição de Não Conformidades por Área (Total: 20)',
              font: {
                size: 16,
                weight: 'bold'
              }
            },
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ': ' + context.parsed.y + ' ocorrências';
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Número de Ocorrências'
              },
              ticks: {
                precision: 0
              }
            }
          }
        }
      });
      
      // Adicionar ao array de gráficos para referência futura se necessário
      return nonconformitiesChart;
    }

    // Função para gerir atalhos de teclado
    function handleKeyboardShortcuts(e) {
      // Só processar atalhos se não estiver editando um campo de texto
      const isEditing = ['INPUT', 'TEXTAREA', 'SELECT'].includes(document.activeElement.tagName);
      if (isEditing) return;
      
      // Atalhos para navegação no PDF
      if (pdfDoc) {
        if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
          prevPage();
          e.preventDefault();
        } else if (e.key === 'ArrowRight' || e.key === 'PageDown') {
          nextPage();
          e.preventDefault();
        } else if (e.key === '+' || e.key === '=') {
          zoomIn();
          e.preventDefault();
        } else if (e.key === '-' || e.key === '_') {
          zoomOut();
          e.preventDefault();
        }
      }
      
      // Outros atalhos globais
      if (e.key === 'Home') {
        showWelcomeContent();
        e.preventDefault();
      } else if (e.key === 'f' && (e.ctrlKey || e.metaKey)) {
        document.getElementById('global-search').focus();
        e.preventDefault();
      } else if (e.key === 'k' && (e.ctrlKey || e.metaKey)) {
        toggleShortcuts();
        e.preventDefault();
      } else if (e.key === 'd' && (e.ctrlKey || e.metaKey)) {
        toggleDarkMode();
        e.preventDefault();
      }
    }
  </script>
 <!-- Botão flutuante para voltar ao topo / conteúdo principal -->
<div id="back-to-home" class="back-to-home" onclick="handleHomeButton()">
  <i class="fas fa-home"></i>
</div>

</body>
</html>
                                       
                                                                                                                              
