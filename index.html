<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Dossier Final da Qualidade (Unificado)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fontes e ícones -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link 
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" 
    rel="stylesheet">
  <link 
    rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- PDF.js e Chart.js -->
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js">
  </script>
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js">
  </script>

  <style>
    :root {
      /* Cores principais */
      --primary: #0056B3;
      --secondary: #FF5A5F;
      --bg: #f5f7fb;
      --white: #fff;
      --text: #333;
      --gray: #bbb;
      --transition: 0.3s ease;
      --font-main: 'Poppins', sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: var(--font-main);
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }
    a { text-decoration: none; color: inherit; }

    /* SPLASH SCREEN */
    .splash-screen {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: linear-gradient(135deg, rgba(0, 86, 179, 0.9), rgba(0,86,179,0.7)),
        url('https://images.unsplash.com/photo-1581094794329-c8112a89af12?fit=crop&w=1920&q=80') 
        center/cover no-repeat;
      display:flex; align-items:center; justify-content:center;
      flex-direction:column; text-align:center; color:#fff;
      z-index:9999; transition: opacity var(--transition);
    }
    .splash-title {
      font-size:2rem; font-weight:700; margin-bottom:0.8rem;
      text-shadow:0 2px 5px rgba(0,0,0,0.3);
    }
    .splash-subtitle {
      font-size:1rem; margin-bottom:1.5rem;
    }
    .btn-big {
      background:#fff; color:var(--primary);
      padding:0.8rem 1.6rem; border-radius:2rem;
      border:none; cursor:pointer; font-weight:600; font-size:1rem;
      box-shadow:0 3px 10px rgba(0,0,0,0.15);
      display:flex; align-items:center; gap:0.5rem;
      transition: transform var(--transition);
    }
    .btn-big:hover { transform: translateY(-3px); }

    .splash-screen.fade-out {
      opacity:0; pointer-events:none;
    }

    /* TOAST */
    .toast-container {
      position:fixed; bottom:1rem; right:1rem; z-index:9999;
      display:flex; flex-direction:column; gap:0.5rem;
    }
    .toast {
      background:#333; color:#fff; padding:0.7rem 1rem;
      border-radius:0.4rem; font-size:0.9rem;
      animation: fadeInUp 0.5s ease forwards;
    }
    @keyframes fadeInUp {
      from {opacity:0; transform: translateY(20px);}
      to {opacity:1; transform: translateY(0);}
    }

    /* BOTÃO VOLTAR AO TOPO */
    .btn-topo {
      position: fixed; bottom:20px; right:20px;
      background: var(--primary); color:#fff; border:none; border-radius:50%;
      padding:0.8rem; font-size:1.2rem; cursor:pointer;
      box-shadow:0 2px 8px rgba(0,0,0,0.2);
      display:none; z-index:9999;
    }
    .btn-topo.show { display:block; }

    /* APP CONTAINER */
    .app-container {
      display:flex; flex-direction:column;
      min-height:100vh; visibility:hidden; opacity:0; transition: opacity 0.5s;
    }
    .app-container.visible {
      visibility:visible; opacity:1;
    }

    /* TOP NAVBAR */
    .top-navbar {
      background: var(--white);
      height:70px; display:flex; align-items:center;
      padding:0 1.5rem; box-shadow:0 2px 10px rgba(0,0,0,0.05);
      position:sticky; top:0; z-index:1000;
    }
    .navbar-brand {
      display:flex; align-items:center; gap:0.5rem; margin-right:auto;
    }
    .brand-logo { height:50px; }
    .navbar-title {
      font-size:1.1rem; font-weight:600; color: var(--primary);
    }
    .navbar-tools { display:flex; gap:1rem; }
    .btn-nav {
      background:none; border:1px solid var(--gray);
      padding:0.6rem 1rem; border-radius:0.4rem;
      display:flex; align-items:center; gap:0.3rem;
      cursor:pointer; color:var(--primary); 
      transition: background var(--transition);
      font-size:0.9rem;
    }
    .btn-nav:hover {
      background: var(--primary); color:#fff; border-color: var(--primary);
    }

    /* LAYOUT PRINCIPAL */
    .main-container {
      display:flex; flex:1;
    }

    /* SIDEBAR */
    .sidebar {
      width:300px; background:#fff; border-right:1px solid #eee;
      position:sticky; top:70px; height:calc(100vh - 70px); overflow-y:auto;
    }
    .sidebar-header {
      padding:1rem; border-bottom:1px solid #eee;
    }
    .sidebar-title {
      font-size:1.05rem; font-weight:600; color:var(--primary);
      display:flex; align-items:center; gap:0.5rem;
    }
    .search-chapters {
      margin-top:0.5rem; position:relative;
    }
    .search-chapters input {
      width:100%; padding:0.5rem 2.5rem 0.5rem 0.8rem; border-radius:1.5rem;
      border:1px solid #ccc; outline:none; transition: border var(--transition);
    }
    .search-chapters input:focus { border-color: var(--primary); }
    .search-icon {
      position:absolute; top:50%; right:0.8rem; transform:translateY(-50%);
      font-size:0.8rem; color:#999;
    }
    .navigation { padding:0.5rem 0; }
    .nav-category {
      border-bottom:1px solid #f4f4f4;
    }
    .category-header {
      padding:0.75rem 1rem; display:flex; align-items:center; justify-content:space-between;
      cursor:pointer; transition: background 0.3s;
    }
    .header-title { display:flex; align-items:center; gap:0.5rem; font-size:0.9rem; }
    .category-header:hover { background:#fafafa; }
    .chevron-icon { transition:transform 0.3s; }
    .nav-category.active .chevron-icon {
      transform:rotate(180deg);
    }
    .category-menu { display:none; }
    .nav-category.active .category-menu {
      display:block; animation:fadeIn 0.3s forwards;
    }
    @keyframes fadeIn {
      from {opacity:0;}
      to {opacity:1;}
    }
    .nav-item {
      padding:0.5rem 2rem; display:flex; align-items:center; gap:0.5rem;
      font-size:0.9rem; cursor:pointer; position:relative;
      transition: background 0.2s;
    }
    .nav-item:hover { background:#f9f9f9; }
    .nav-item i { color:var(--primary); }
    .doc-status {
      position:absolute; right:1rem; top:50%; transform:translateY(-50%);
      font-size:0.7rem; background: var(--secondary); color:#fff;
      padding:0.2rem 0.5rem; border-radius:1rem;
    }

    /* MAIN CONTENT */
    .main-content {
      flex:1; padding:1rem 2rem;
    }
    .breadcrumb {
      display:flex; align-items:center; gap:0.3rem; margin-bottom:1rem;
      font-size:0.85rem;
    }
    .breadcrumb-item:not(:last-child)::after {
      content:"/"; margin:0 0.3rem; color:#aaa;
    }
    .page-header {
      margin-bottom:1rem; padding-bottom:0.8rem;
      border-bottom:2px solid #eee;
    }
    .page-title {
      font-size:1.4rem; font-weight:700; color:var(--primary);
      margin-bottom:0.3rem;
    }
    .page-subtitle { font-size:0.9rem; color:#666; }

    /* STATS COMPACTAS */
    .stats-container {
      display:flex; flex-wrap:wrap; gap:1rem;
      margin-bottom:1.5rem;
    }
    .stats-box {
      background:#f9fafb;
      border-radius:0.4rem;
      box-shadow:0 1px 5px rgba(0,0,0,0.05);
      flex:1; min-width:120px;
      padding:0.7rem; text-align:center;
    }
    .stats-label {
      font-size:0.8rem; color:#666; margin-bottom:0.3rem;
    }
    .stats-value {
      font-size:1.3rem; font-weight:600; color:#333;
    }

    /* CHART */
    .chart-container {
      background:#fff; border-radius:0.5rem; 
      box-shadow:0 1px 5px rgba(0,0,0,0.05);
      padding:1rem; margin-bottom:1.5rem;
    }
    .chart-title { font-size:1rem; font-weight:600; color:var(--primary); margin-bottom:0.5rem; }

    /* TEAM (Assinaturas) */
    .team-section {
      background:#fff; border-radius:0.5rem;
      box-shadow:0 1px 5px rgba(0,0,0,0.05);
      padding:1rem; margin-bottom:1.5rem;
    }
    .team-title {
      font-size:1rem; font-weight:600; color:var(--primary); margin-bottom:1rem;
    }
    .team-list {
      display:flex; flex-wrap:wrap; gap:1rem;
    }
    .team-member {
      flex:1; min-width:180px; 
      background:#fafafa; border-radius:0.5rem; 
      padding:1rem; text-align:center;
      box-shadow:0 1px 5px rgba(0,0,0,0.03);
    }
    .member-photo {
      width:80px; height:80px; border-radius:50%;
      background:#ddd; margin:0 auto 0.5rem;
      display:flex; align-items:center; justify-content:center;
      font-size:2rem; color:#777;
    }
    .member-position {
      font-size:0.85rem; font-weight:600; color:var(--primary);
    }
    .member-role {
      font-size:0.8rem; color:#666; margin-bottom:0.3rem;
    }
    .member-name { font-size:0.95rem; font-weight:600; margin-bottom:0.5rem; }
    .signature-seal {
      background: var(--primary); color:#fff;
      padding:0.3rem 0.6rem; border-radius:1rem;
      font-size:0.75rem; display:inline-flex; align-items:center; gap:0.3rem;
    }

    /* PDF VIEWER */
    .pdf-viewer {
      display:none; background:#fff; border-radius:0.5rem;
      box-shadow:0 1px 5px rgba(0,0,0,0.05);
      margin-top:1rem; overflow:hidden;
    }
    .pdf-viewer.active { display:block; }
    .pdf-header {
      display:flex; justify-content:space-between; align-items:center;
      padding:0.7rem 1rem; border-bottom:1px solid #eee; background:#fafafa;
    }
    .pdf-title { font-weight:600; }
    .pdf-body {
      position:relative; height:70vh; background:#eaeaea; display:flex; justify-content:center; align-items:center; overflow:auto;
    }
    .pdf-controls {
      display:flex; justify-content:space-between; align-items:center;
      padding:0.5rem 1rem; border-top:1px solid #eee; background:#fafafa;
    }
    .loading-indicator {
      position:absolute; display:none; flex-direction:column; align-items:center;
    }
    .spinner {
      width:40px; height:40px; border:4px solid rgba(0,0,0,0.1);
      border-top:4px solid var(--primary); border-radius:50%;
      animation:spin 1s linear infinite; margin-bottom:0.5rem;
    }
    @keyframes spin {
      to {transform:rotate(360deg);}
    }

    @media(max-width:768px){
      .sidebar { position:fixed; left:-300px; top:70px; }
      .sidebar.active { left:0; }
      .main-content { padding:1rem; }
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div class="splash-screen" id="splash-screen">
    <h1 class="splash-title">Dossier Final da Qualidade</h1>
    <p class="splash-subtitle">Projeto 4001008 - Alba</p>
    <button class="btn-big" onclick="enterDossier()">
      <i class="fa fa-book-open"></i> Entrar no Dossier
    </button>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- Botão Voltar ao Topo -->
  <button class="btn-topo" id="btn-topo" onclick="scrollToTop()">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- App Container -->
  <div class="app-container" id="app-container">
    <!-- Top Navbar -->
    <header class="top-navbar">
      <div class="navbar-brand">
        <img src="assets/images/logoasch.png" alt="Logo" class="brand-logo">
        <div class="navbar-title">Dossier de Qualidade (4001008)</div>
      </div>
      <div class="navbar-tools">
        <button class="btn-nav" onclick="showToast('Voltando ao Início...','info'); goHome();">
          <i class="fas fa-home"></i> Início
        </button>
        <button class="btn-nav" onclick="showToast('Feedback em breve!','info')">
          <i class="fas fa-comment"></i> Feedback
        </button>
      </div>
    </header>

    <div class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2 class="sidebar-title">
            <i class="fas fa-folder"></i> Índice
          </h2>
          <div class="search-chapters">
            <input 
              type="text" 
              placeholder="Pesquisar capítulo..."
              id="chapterSearch" oninput="filterChapters()">
            <i class="fas fa-search search-icon"></i>
          </div>
        </div>
        <div class="navigation" id="nav-container">
          <!-- Exemplo de nav-cat 1 -->
          <div class="nav-category">
            <div class="category-header" onclick="toggleCategory(this.parentNode)">
              <div class="header-title">
                <i class="fas fa-tasks"></i>
                <span>1.0 – Sistema de Gestão da Qualidade</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="openPdf('1.1-PQ.pdf','1.1 - Plano da Qualidade')">
                <i class="fas fa-clipboard-list"></i>
                <span>1.1 – Plano da Qualidade</span>
                <span class="doc-status">Aprovado</span>
              </div>
              <div class="nav-item" onclick="openPdf('1.2-PIE.pdf','1.2 – Plano de Inspeção e Ensaios')">
                <i class="fas fa-vial"></i>
                <span>1.2 – Plano de Inspeção e Ensaios</span>
              </div>
            </div>
          </div>

          <!-- Exemplo de nav-cat 2 -->
          <div class="nav-category">
            <div class="category-header" onclick="toggleCategory(this.parentNode)">
              <div class="header-title">
                <i class="fas fa-hard-hat"></i>
                <span>2.0 – Execução do Projeto</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="openPdf('2.1-obraCivil.pdf','2.1 – Obra Civil')">
                <i class="fas fa-building"></i>
                <span>2.1 – Obra Civil</span>
              </div>
              <div class="nav-item" onclick="openPdf('2.2-piping.pdf','2.2 – Piping')">
                <i class="fas fa-project-diagram"></i>
                <span>2.2 – Piping</span>
              </div>
            </div>
          </div>

          <!-- Exemplo de nav-cat 3 -->
          <div class="nav-category">
            <div class="category-header" onclick="toggleCategory(this.parentNode)">
              <div class="header-title">
                <i class="fas fa-drafting-compass"></i>
                <span>3.0 – Documentos de Engenharia</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="openPdf('3.1-especificacoes.pdf','3.1 – Especificações Técnicas')">
                <i class="fas fa-file-alt"></i>
                <span>3.1 – Especificações Técnicas</span>
                <span class="doc-status">Aprovado</span>
              </div>
              <div class="nav-item" onclick="openPdf('3.2-planos.pdf','3.2 – Planos Construtivos')">
                <i class="fas fa-blueprint"></i>
                <span>3.2 – Planos Construtivos</span>
              </div>
            </div>
          </div>

          <!-- Exemplo de nav-cat 4 -->
          <div class="nav-category">
            <div class="category-header" onclick="toggleCategory(this.parentNode)">
              <div class="header-title">
                <i class="fas fa-archive"></i>
                <span>4.0 – Documentação Adicional</span>
              </div>
              <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="category-menu">
              <div class="nav-item" onclick="openPdf('4.1-Punch.pdf','4.1 – Punch List')">
                <i class="fas fa-clipboard-check"></i>
                <span>4.1 – Punch List</span>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Conteúdo principal -->
      <main class="main-content">
        <div class="breadcrumb">
          <span class="breadcrumb-item" onclick="showDashboard()">Início</span>
          <span class="breadcrumb-item" id="current-section">Dashboard</span>
        </div>

        <!-- Dashboard -->
        <div id="dashboard">
          <header class="page-header">
            <h1 class="page-title">Dossier Final da Qualidade</h1>
            <p class="page-subtitle">
              Projeto Alba – Empreitada 4001008 (Jun.2023 – 31/03/2025)
            </p>
          </header>

          <!-- Estatísticas Compactas -->
          <section class="stats-container">
            <div class="stats-box">
              <div class="stats-label">Total de Ensaios</div>
              <div class="stats-value">419</div>
            </div>
            <div class="stats-box">
              <div class="stats-label">Conformes</div>
              <div class="stats-value">406</div>
            </div>
            <div class="stats-box">
              <div class="stats-label">Não Conformes</div>
              <div class="stats-value">8</div>
            </div>
            <div class="stats-box">
              <div class="stats-label">Pendentes</div>
              <div class="stats-value">5</div>
            </div>
          </section>

          <!-- Gráfico -->
          <section class="chart-container">
            <h3 class="chart-title">Ensaios por Tipo</h3>
            <canvas id="chartEnsaios" height="180"></canvas>
          </section>

          <!-- Equipa Responsável -->
          <section class="team-section">
            <h2 class="team-title"><i class="fas fa-users"></i> Equipa Responsável</h2>
            <div class="team-list">
              <div class="team-member">
                <div class="member-photo">JA</div>
                <div class="member-position">ELABORADO</div>
                <div class="member-role">Qualidade</div>
                <div class="member-name">José Antunes</div>
                <div class="signature-seal">
                  <i class="fas fa-shield-alt"></i> Verificado
                </div>
              </div>
              <div class="team-member">
                <div class="member-photo">MC</div>
                <div class="member-position">VERIFICADO</div>
                <div class="member-role">Diretor Técnico</div>
                <div class="member-name">Mário Cristiano</div>
              </div>
              <div class="team-member">
                <div class="member-photo">LS</div>
                <div class="member-position">APROVADO</div>
                <div class="member-role">Diretor de Obra</div>
                <div class="member-name">Luis Salvado</div>
              </div>
            </div>
          </section>
        </div>

        <!-- PDF Viewer -->
        <div class="pdf-viewer" id="pdf-viewer">
          <div class="pdf-header">
            <div class="pdf-title" id="pdf-title">Documento</div>
            <div>
              <button class="btn-nav" onclick="showToast('Download iniciado','success')">
                <i class="fas fa-download"></i> Download
              </button>
              <button class="btn-nav" onclick="closePdfViewer()">
                <i class="fas fa-times"></i> Fechar
              </button>
            </div>
          </div>
          <div class="pdf-body">
            <div class="loading-indicator" id="pdf-loading">
              <div class="spinner"></div>
              <p>A carregar PDF...</p>
            </div>
            <canvas id="pdf-canvas"></canvas>
          </div>
          <div class="pdf-controls">
            <div>
              <button class="btn-nav" id="prevPage"><i class="fas fa-chevron-left"></i></button>
              <span style="margin:0 0.4rem;">
                Página <span id="page-num">0</span> de <span id="page-count">0</span>
              </span>
              <button class="btn-nav" id="nextPage"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div>
              <button class="btn-nav" id="zoomOut"><i class="fas fa-search-minus"></i></button>
              <span style="margin:0 0.4rem;" id="zoomVal">100%</span>
              <button class="btn-nav" id="zoomIn"><i class="fas fa-search-plus"></i></button>
            </div>
          </div>
        </div>
      </main>
    </div>

    <footer style="background:#fff; padding:1rem; text-align:center;">
      <p style="color:#666; font-size:0.9rem;">
        &copy; 2025 ASCH INFRAESTRUCTURAS Y SERVICIOS S.A. - Todos os direitos reservados
      </p>
    </footer>
  </div>

  <script>
    // SPLASH
    function enterDossier(){
      const splash = document.getElementById('splash-screen');
      splash.classList.add('fade-out');
      setTimeout(()=>{ splash.style.display='none'; },500);
      const app = document.getElementById('app-container');
      setTimeout(()=>{ app.classList.add('visible'); },500);
    }

    // BOTÃO TOPO
    const btnTopo = document.getElementById('btn-topo');
    window.onscroll = function(){
      if(document.documentElement.scrollTop>200){
        btnTopo.classList.add('show');
      } else {
        btnTopo.classList.remove('show');
      }
    };
    function scrollToTop(){ window.scrollTo({top:0, behavior:'smooth'}); }

    // TOAST
    function showToast(msg, type='success'){
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.classList.add('toast');
      if(type==='error') toast.style.background='#c0392b';
      else if(type==='info') toast.style.background='#2980b9';

      toast.textContent = msg;
      container.appendChild(toast);
      setTimeout(()=>{
        toast.style.opacity='0';
        setTimeout(()=>toast.remove(),300);
      },3000);
    }

    // HOME
    function goHome(){
      showDashboard();
    }

    // FILTRAR CAPÍTULOS
    function filterChapters(){
      const query = document.getElementById('chapterSearch').value.toLowerCase();
      const categories = document.querySelectorAll('.nav-category');
      categories.forEach(cat=>{
        let text = cat.innerText.toLowerCase();
        cat.style.display = text.includes(query) ? 'block' : 'none';
      });
    }

    // ABRIR/CLOSE SUBMENU
    function toggleCategory(catEl){ catEl.classList.toggle('active'); }

    // MOSTRAR “DASHBOARD”
    function showDashboard(){
      document.getElementById('dashboard').style.display='block';
      document.getElementById('pdf-viewer').classList.remove('active');
      document.getElementById('current-section').textContent='Dashboard';
    }

    // PDFJS
    let pdfDoc=null, pageNum=1, scale=1.2, zoomVal=100, pageRendering=false, pageNumPending=null;
    let canvas=null, ctx=null;

    function openPdf(pdfPath, title){
      // Switch para PDF viewer
      document.getElementById('dashboard').style.display='none';
      document.getElementById('pdf-viewer').classList.add('active');
      document.getElementById('current-section').textContent=title;
      document.getElementById('pdf-title').textContent=title;

      pdfDoc=null; pageNum=1; scale=1.2; zoomVal=100;
      document.getElementById('zoomVal').textContent=zoomVal+'%';

      canvas=document.getElementById('pdf-canvas');
      ctx=canvas.getContext('2d');

      loadPdf(pdfPath);
    }

    function loadPdf(path){
      const loadingEl=document.getElementById('pdf-loading');
      loadingEl.style.display='flex';
      pdfjsLib.getDocument(path).promise.then(pdfDoc_=>{
        pdfDoc=pdfDoc_;
        document.getElementById('page-count').textContent=pdfDoc.numPages;
        document.getElementById('page-num').textContent=pageNum;
        loadingEl.style.display='none';
        renderPage(pageNum);
      }).catch(err=>{
        console.error("Erro ao carregar PDF:", err);
        showToast("Falha ao carregar PDF","error");
        loadingEl.style.display='none';
      });
    }

    function renderPage(num){
      pageRendering=true;
      pdfDoc.getPage(num).then(page=>{
        let viewport=page.getViewport({scale});
        canvas.height=viewport.height; canvas.width=viewport.width;
        let renderCtx={ canvasContext:ctx, viewport };
        let renderTask=page.render(renderCtx);
        renderTask.promise.then(()=>{
          pageRendering=false;
          if(pageNumPending!==null){
            renderPage(pageNumPending);
            pageNumPending=null;
          }
        });
      });
      document.getElementById('page-num').textContent=num;
    }

    function queueRenderPage(num){
      if(pageRendering){ pageNumPending=num; }
      else{ renderPage(num); }
    }

    // Buttons PDF
    document.addEventListener('DOMContentLoaded',()=>{
      document.getElementById('prevPage').addEventListener('click',()=>{
        if(pageNum<=1)return;
        pageNum--;
        queueRenderPage(pageNum);
      });
      document.getElementById('nextPage').addEventListener('click',()=>{
        if(!pdfDoc || pageNum>=pdfDoc.numPages)return;
        pageNum++;
        queueRenderPage(pageNum);
      });
      document.getElementById('zoomIn').addEventListener('click',()=>{
        if(zoomVal>=200)return;
        zoomVal+=10; scale+=0.1;
        document.getElementById('zoomVal').textContent=zoomVal+'%';
        renderPage(pageNum);
      });
      document.getElementById('zoomOut').addEventListener('click',()=>{
        if(zoomVal<=50)return;
        zoomVal-=10; scale-=0.1;
        document.getElementById('zoomVal').textContent=zoomVal+'%';
        renderPage(pageNum);
      });
      // Inicia chart
      initChartEnsaios();
    });

    function closePdfViewer(){
      document.getElementById('pdf-viewer').classList.remove('active');
      showDashboard();
    }

    // CHART EXEMPLO
    function initChartEnsaios(){
      const ctxChart=document.getElementById('chartEnsaios').getContext('2d');
      new Chart(ctxChart, {
        type:'bar',
        data:{
          labels:['Betão','Densid','Solos','Argam','Placas','Agreg','Soldad','Dielét','Pressão','Linhas','Pintura'],
          datasets:[
            {
              label:'Conformes',
              data:[94,56,31,60,27,15,20,29,11,39,24],
              backgroundColor:'rgba(40,167,69,0.6)'
            },
            {
              label:'NC',
              data:[1,2,0,2,1,0,1,0,0,1,0],
              backgroundColor:'rgba(255,90,95,0.6)'
            },
            {
              label:'Pend',
              data:[0,0,1,0,0,0,1,1,1,0,1],
              backgroundColor:'rgba(255,193,7,0.6)'
            }
          ]
        },
        options:{
          responsive:true,
          scales:{ y:{ beginAtZero:true } }
        }
      });
    }
  </script>
</body>
</html>


