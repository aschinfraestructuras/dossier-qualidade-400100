<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Dossiê de Qualidade - Índice</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Estilos CSS -->
  <style>
    :root {
      --color-primary: #003366;
      --color-secondary: #0055a5;
      --color-background: #f9f9f9;
      --color-text: #333;
      --color-header-bg: #003366;
      --color-header-text: #fff;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: var(--color-text);
      background: var(--color-background);
    }
    header {
      background: var(--color-header-bg);
      color: var(--color-header-text);
      padding: 10px 20px;
      display: flex;
      align-items: center;
    }
    header .menu-button {
      display: none;
      background: none;
      border: none;
      color: var(--color-header-text);
      font-size: 1.5em;
      cursor: pointer;
      margin-right: 10px;
    }
    header .logo {
      height: 50px;
      margin-right: 15px;
    }
    header .title-group {
      flex-grow: 1;
    }
    header .title-group h1 {
      margin: 0;
      font-size: 1.5em;
    }
    header .title-group h2 {
      margin: 0;
      font-size: 1em;
      font-weight: normal;
      opacity: 0.8;
    }
    header .search-group {
      display: flex;
      align-items: center;
    }
    header .search-group input[type="text"] {
      padding: 5px;
      margin-right: 5px;
      border: none;
      border-radius: 3px;
    }
    header .search-group select {
      padding: 5px;
      border: none;
      border-radius: 3px;
    }
    main {
      display: flex;
      height: calc(100vh - 70px);
    }
    nav.sidebar {
      width: 300px;
      background: #f0f0f0;
      border-right: 1px solid #ccc;
      overflow-y: auto;
      padding: 15px;
    }
    .tree details {
      margin: 5px 0;
    }
    .tree summary {
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
      list-style: none;
      outline: none;
    }
    .tree summary:hover {
      background: #e0e0e0;
    }
    .tree ul {
      list-style: none;
      padding-left: 20px;
      margin: 5px 0;
    }
    .tree li {
      margin: 4px 0;
    }
    .tree a {
      text-decoration: none;
      color: var(--color-text);
      display: inline-block;
      width: 100%;
      position: relative;
    }
    .tree a:hover {
      text-decoration: underline;
    }
    .status {
      font-weight: bold;
      margin-left: 5px;
    }
    .status.aprovado {
      color: green;
    }
    .status.pendente {
      color: orange;
    }
    .status.reprovado {
      color: red;
    }
    section.content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .tab-container {
      max-width: 100%;
    }
    .tabs {
      display: flex;
      border-bottom: 2px solid var(--color-primary);
      margin-bottom: 10px;
    }
    .tabs .tab {
      background: #ddd;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
      color: #555;
      border-top-left-radius: 4px;
      border-top-right-radius: 4px;
      margin-right: 5px;
    }
    .tabs .tab.active {
      background: var(--color-primary);
      color: #fff;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .validation-info {
      margin-top: 20px;
      font-size: 0.9em;
      color: #555;
      background: #f0f0f0;
      padding: 5px;
      border-radius: 4px;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      margin: 10% auto;
      width: 300px;
      border-radius: 5px;
      position: relative;
    }
    .modal-close {
      position: absolute;
      top: 5px;
      right: 10px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
    }
    .modal-body {
      margin-top: 15px;
    }
    /* Responsivo */
    @media (max-width: 768px) {
      header {
        flex-wrap: wrap;
        align-items: flex-start;
      }
      header .menu-button {
        display: block;
      }
      header .search-group {
        flex: 1 0 100%;
        margin-top: 10px;
      }
      nav.sidebar {
        position: fixed;
        top: 70px;
        bottom: 0;
        left: 0;
        width: 80%;
        max-width: 300px;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 1001;
      }
      nav.sidebar.open {
        transform: translateX(0);
        box-shadow: 2px 0 5px rgba(0,0,0,0.3);
      }
      /* Quando o menu está aberto, podemos adicionar um overlay se necessário */
    }
  </style>
</head>
<body>

<header>
  <button class="menu-button" aria-label="Menu">&#9776;</button>
  <img src="logo.png" alt="Logo" class="logo" />
  <div class="title-group">
    <h1>Nome do Projeto</h1>
    <h2>Título Institucional</h2>
  </div>
  <div class="search-group">
    <input type="text" id="globalSearch" placeholder="Pesquisar..." />
    <select id="filter">
      <option value="">Todos</option>
      <option value="aprovado">Aprovados</option>
      <option value="pendente">Pendentes</option>
      <option value="reprovado">Reprovados</option>
    </select>
  </div>
</header>

<main>
  <nav class="sidebar">
    <div class="tree">
      <details open>
        <summary>Capítulo 1: Introdução <span class="status aprovado" title="Aprovado">✔️</span></summary>
        <ul>
          <li><a href="#" data-pdf="capitulo1-1.pdf">1.1 Objetivo <span class="status aprovado" title="Aprovado">✔️</span></a></li>
          <li><a href="#" data-pdf="capitulo1-2.pdf">1.2 Escopo <span class="status pendente" title="Pendente">⏳</span></a></li>
        </ul>
      </details>
      <details>
        <summary>Capítulo 2: Metodologia <span class="status pendente" title="Pendente">⏳</span></summary>
        <ul>
          <li><a href="#" data-pdf="capitulo2-1.pdf">2.1 Processo A <span class="status pendente" title="Pendente">⏳</span></a></li>
          <li><a href="#" data-pdf="capitulo2-2.pdf">2.2 Processo B <span class="status reprovado" title="Não Aprovado">❌</span></a></li>
          <li><a href="#" data-pdf="capitulo2-3.pdf">2.3 Processo C <span class="status aprovado" title="Aprovado">✔️</span></a></li>
        </ul>
      </details>
      <!-- Exemplo de outros capítulos -->
      <details>
        <summary>Capítulo 3: Resultados <span class="status aprovado" title="Aprovado">✔️</span></summary>
        <ul>
          <li><a href="#" data-pdf="capitulo3-1.pdf">3.1 Resultados Preliminares <span class="status aprovado" title="Aprovado">✔️</span></a></li>
          <li><a href="#" data-pdf="capitulo3-2.pdf">3.2 Análises Finais <span class="status pendente" title="Pendente">⏳</span></a></li>
        </ul>
      </details>
    </div>
  </nav>
  <section class="content">
    <div class="tab-container" id="chapterContent">
      <div class="tabs">
        <button class="tab active" data-tab="info">Informações</button>
        <button class="tab" data-tab="documento">Documento</button>
      </div>
      <div id="info" class="tab-content active">
        <h3>Bem-vindo ao Dossiê de Qualidade</h3>
        <p>Selecione um capítulo à esquerda para visualizar seu conteúdo. Utilize a busca acima para encontrar capítulos ou documentos específicos.</p>
      </div>
      <div id="documento" class="tab-content">
        <!-- Visualizador de PDF -->
        <iframe id="pdfFrame" src="" width="100%" height="500px" style="border: none;"></iframe>
      </div>
    </div>
    <!-- Espaço para validação digital futura -->
    <div id="validation" class="validation-info">
      Validação digital: <span id="validationStatus">Não verificado</span>
    </div>
  </section>
</main>

<!-- Modal de exemplo para informações adicionais -->
<div id="infoModal" class="modal">
  <div class="modal-content">
    <span class="modal-close">&times;</span>
    <div class="modal-body">
      <h3>Informações do Capítulo</h3>
      <p id="modalText">Detalhes do capítulo selecionado.</p>
    </div>
  </div>
</div>

<!-- Scripts JS -->
<script>
  // Alternar menu lateral no mobile
  const menuButton = document.querySelector('.menu-button');
  const sidebar = document.querySelector('.sidebar');
  menuButton.addEventListener('click', () => {
    sidebar.classList.toggle('open');
  });

  // Fechar sidebar ao selecionar um item (no mobile)
  document.querySelectorAll('.tree a[data-pdf]').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const pdfUrl = this.getAttribute('data-pdf');
      if (pdfUrl) {
        // Mostrar PDF no iframe (integração com PDF.js pode ser adicionada aqui)
        document.getElementById('pdfFrame').src = pdfUrl;
        // Exibir aba "Documento"
        document.querySelector('.tabs .tab[data-tab="documento"]').click();
        // Fechar menu lateral no mobile após seleção
        sidebar.classList.remove('open');
      }
    });
  });

  // Troca de abas (Informações vs Documento)
  document.querySelectorAll('.tabs .tab').forEach(tabBtn => {
    tabBtn.addEventListener('click', () => {
      // Ativar aba selecionada
      document.querySelectorAll('.tabs .tab').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
      tabBtn.classList.add('active');
      document.getElementById(tabBtn.getAttribute('data-tab')).classList.add('active');
    });
  });

  // Filtro de busca global
  function filterList() {
    const text = document.getElementById('globalSearch').value.toLowerCase();
    const statusFilter = document.getElementById('filter').value;
    document.querySelectorAll('.tree details').forEach(det => {
      let chapterMatch = false;
      const summaryEl = det.querySelector('summary');
      const summaryText = summaryEl.textContent.toLowerCase();
      // Verificar se o título do capítulo corresponde à busca
      if (text === '' || summaryText.includes(text)) {
        chapterMatch = true;
      }
      let anyChildVisible = false;
      det.querySelectorAll('li').forEach(li => {
        const liText = li.textContent.toLowerCase();
        const liStatus = li.querySelector('.status');
        const liStatusClass = liStatus ? liStatus.classList : null;
        const textMatch = text === '' || liText.includes(text);
        const statusMatch = !statusFilter || (liStatusClass && liStatusClass.contains(statusFilter));
        if (textMatch && statusMatch) {
          li.style.display = '';
          anyChildVisible = true;
        } else {
          li.style.display = 'none';
        }
      });
      // Verificar status do próprio capítulo (summary)
      const summaryStatus = summaryEl.querySelector('.status');
      const summaryStatusMatch = !statusFilter || (summaryStatus && summaryStatus.classList.contains(statusFilter));
      if ((chapterMatch && summaryStatusMatch) || anyChildVisible) {
        det.style.display = '';
        // Abrir capítulo se houver correspondência em subitens
        if (anyChildVisible || (text !== '' && chapterMatch)) {
          det.open = true;
        }
      } else {
        det.style.display = 'none';
      }
    });
  }
  document.getElementById('globalSearch').addEventListener('input', filterList);
  document.getElementById('filter').addEventListener('change', filterList);

  // Modal de informações (exemplo: duplo clique no título do capítulo)
  const modal = document.getElementById('infoModal');
  const modalText = document.getElementById('modalText');
  document.querySelectorAll('.tree summary').forEach(summary => {
    summary.addEventListener('dblclick', () => {
      modalText.innerText = 'Detalhes de ' + summary.textContent;
      modal.style.display = 'block';
    });
  });
  document.querySelector('.modal-close').addEventListener('click', () => {
    modal.style.display = 'none';
  });
  window.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  });
</script>

</body>
</html>

